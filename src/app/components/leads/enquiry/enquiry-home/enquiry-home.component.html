<div class="clearFix" id="enquiryList" #enquiryManager style="padding-right: 2%;">
    <!-- Main View -->
    <aside class="middle-full" #enqPage>
        <section class="middle-top clearFix bulk-header" style="padding-left: 5px;">

            <h1 class="pull-left">
                <!-- <a routerLink="/view/leads" style="padding:0px;">
                    Lead
                </a> -->
                Leads
                <i style="font-family: 'FontAwesome';" class="fas fa-angle-right"></i>Enquiries
                <a class="hide" id="enq_download"></a>
            </h1>
            <aside class="headEnq pull-right">

                <div class="btn-container">
                    <div class="btn-item">
                        <p-splitButton label="{{varJson.selectedRowCount}} Enquiry Selected" [model]="bulkAddItems"
                            *ngIf="varJson.selectedRowCount != 0"></p-splitButton>
                    </div>
                    <div class="btn-item">
                        <button type="button" class="add-class-btn pull-right" name="button"
                            routerLink='/view/leads/add'>
                            <i class="fa fa-plus" aria-hidden="true"></i>
                            &nbsp; Add Enquiry
                        </button>
                    </div>
                    <div class="btn-item" *ngIf="permission && (downloadEnquiryReportAccess || showBulkUpload || (varJson.showDownloadSummary && downloadEnquiryReportAccess))">
                        <button type="button" class="add-class-btn pull-right" name="button"
                            (click)="flagJSON.isEnquiryOptions = !flagJSON.isEnquiryOptions">
                            More &nbsp;
                            <i class="fa fa-ellipsis-v" aria-hidden="true"></i>
                        </button>
                        <div class="more-info-container"
                            [ngClass]="{'visibiltyClass':(flagJSON.isEnquiryAdmin == false)}"
                            *ngIf="flagJSON.isEnquiryOptions" (mouseleave)="flagJSON.isEnquiryOptions = false" #optMenu>
                            <div class="more-info-item" (click)="downloadAllEnquiries()"
                                *ngIf="downloadEnquiryReportAccess">
                                <i class="fa fa-file-excel-o" aria-hidden="true"></i> &nbsp;
                                <span>Export</span>
                            </div>
                            <div class="more-info-item" routerLink="upload" *ngIf="showBulkUpload">
                                <i class="fa fa-upload" aria-hidden="true"></i> &nbsp;
                                <span>Upload Enquiry</span>
                            </div>
                            <div *ngIf="varJson.showDownloadSummary && downloadEnquiryReportAccess"
                                class="more-info-item" (click)="downloadSummaryReport()" style="border-bottom: none;">
                                <i class="fa fa-download" aria-hidden="true"></i> &nbsp;
                                <span>Download Summary Report</span>
                            </div>
                        </div>
                    </div>
                </div>
            </aside>

        </section>

        <!-- Enquiry Page Start here -->
        <section class="middle-main clearFix" id="middleMainForEnquiryList" style="border-top: 1px solid lightgrey;">
            <!-- Search bar and Advance Filter -->
            <section class="common-search-filter" id="searchFilter">
                <div class="filter-search">
                    <div class="filter-box clearFix">
                        <!-- Search Bar -->
                        <div class="row">
                            <div class="c-lg-5 c-md-5 c-sm-5 pull-left" style="padding-right: 0;">
                                <div class="search-filter-wrapper" id="adFilterExitVisible">
                                    <input #search type="text" class="normal-field"
                                        placeholder="Search Name/Contact/Enquiry No."
                                        style="font-size:12px; margin: 0px 5px 0px -5px;"
                                        [(ngModel)]="varJson.searchBarData" name="searchData"
                                        (keyup.enter)="searchDatabase()" id="searchBarData">
                                    <input type="button" class="fullBlue btn" value="Search" (click)="searchDatabase()"
                                        id="btnSearchData" />
                                </div>
                            </div>


                            <!-- Quick Filter -->
                            <div class="c-lg-3 c-md-3 c-sm-3 pull-left" style="right: 2%;">
                                <div id="qfilt">
                                    <quick-filter [inputList]="statFilter" (selectedValue)="statusFilter($event)"
                                        [modelName]="'enqList'">
                                    </quick-filter>
                                </div>
                            </div>


                            <!-- Advance Filter Trigger -->
                            <div class="c-lg-3 c-md-3 c-sm-3" style="left: 7%;">
                                <span class="filter-right" style="float: right;margin-right: 33px;margin-top: 4px;">

                                    <a href="javascript:void(0);" id="adFilterOpen" (click)="openAdFilter()"
                                        class="openAdFilter">Advance
                                        Filter&nbsp;
                                    </a>
                                    <a href="javascript:void(0);" id="adFilterExit" class="closeAdFilter hide"
                                        (click)="closeAdFilter()">
                                        <!-- <svg xmlns="http://www.w3.org/2000/svg" viewBox="3712 291 16 16">
                      <g id="Group_1214" data-name="Group 1214" transform="translate(2700 -6)">
                          <g id="Group_1213" data-name="Group 1213" transform="translate(34.189 -7.77)">
                              <line id="Line_274" data-name="Line 274" class="cls-1" y2="19.798" transform="translate(992.81 305.77) rotate(45)" />
                              <line id="Line_275" data-name="Line 275" class="cls-1" x1="19.798" transform="translate(978.81 305.77) rotate(45)" />
                          </g>
                          <rect id="Rectangle_686" data-name="Rectangle 686" class="cls-2" width="16" height="16" transform="translate(1012 297)" />
                      </g>
                  </svg> -->
                                        <svg xmlns="http://www.w3.org/2000/svg"
                                            xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px"
                                            y="0px" viewBox="0 0 469.785 469.785"
                                            style="enable-background:new 0 0 469.785 469.785;" xml:space="preserve">
                                            <g transform="matrix(1.25 0 0 -1.25 0 45)">

                                                <g>
                                                    <g>
                                                        <path style="fill:#DD2E44;"
                                                            d="M228.294-151.753L367.489-12.558c11.116,11.105,11.116,29.116,0,40.22     c-11.105,11.116-29.104,11.116-40.22,0L188.073-111.533L48.866,27.663c-11.093,11.116-29.116,11.116-40.22,0     c-11.105-11.105-11.105-29.116,0-40.22l139.207-139.196L8.338-291.268c-11.116-11.116-11.116-29.116,0-40.22     c5.552-5.564,12.834-8.34,20.116-8.34c7.27,0,14.552,2.776,20.105,8.34l139.514,139.514l139.196-139.196     c5.564-5.552,12.834-8.34,20.116-8.34c7.27,0,14.552,2.788,20.105,8.34c11.116,11.105,11.116,29.104,0,40.22L228.294-151.753z" />
                                                    </g>
                                                </g>
                                            </g>

                                            <g></g>
                                            <g></g>
                                            <g></g>
                                            <g></g>
                                            <g></g>
                                            <g></g>
                                            <g></g>
                                            <g></g>
                                            <g></g>
                                            <g></g>
                                            <g></g>
                                            <g></g>
                                            <g></g>
                                            <g></g>
                                            <g>
                                            </g>
                                        </svg>
                                        Close Advance Filter
                                    </a>
                                </span>
                                <section id="customizableTableSection" class="login-tube"
                                    style="position: absolute;right: 7px;">
                                    <!-- <div> -->
                                    <i class="fa fa-eye-slash" (click)="openPreferences()"
                                        style="font-family: 'FontAwesome' ; display: inline-block;font-size: 28px;cursor: pointer;color: blue;"></i>
                                    <!-- </div> -->
                                    <!-- <nav style="margin-top: 10px;">
                  <ul class="login-nav">
                    <li class="pos-rel">
                      <i class="icons">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
                          <path id="gearIcon"
                            d="M24 14.187v-4.374c-2.148-.766-2.726-.802-3.027-1.529-.303-.729.083-1.169 1.059-3.223l-3.093-3.093c-2.026.963-2.488 1.364-3.224 1.059-.727-.302-.768-.889-1.527-3.027h-4.375c-.764 2.144-.8 2.725-1.529 3.027-.752.313-1.203-.1-3.223-1.059l-3.093 3.093c.977 2.055 1.362 2.493 1.059 3.224-.302.727-.881.764-3.027 1.528v4.375c2.139.76 2.725.8 3.027 1.528.304.734-.081 1.167-1.059 3.223l3.093 3.093c1.999-.95 2.47-1.373 3.223-1.059.728.302.764.88 1.529 3.027h4.374c.758-2.131.799-2.723 1.537-3.031.745-.308 1.186.099 3.215 1.062l3.093-3.093c-.975-2.05-1.362-2.492-1.059-3.223.3-.726.88-.763 3.027-1.528zm-4.875.764c-.577 1.394-.068 2.458.488 3.578l-1.084 1.084c-1.093-.543-2.161-1.076-3.573-.49-1.396.581-1.79 1.693-2.188 2.877h-1.534c-.398-1.185-.791-2.297-2.183-2.875-1.419-.588-2.507-.045-3.579.488l-1.083-1.084c.557-1.118 1.066-2.18.487-3.58-.579-1.391-1.691-1.784-2.876-2.182v-1.533c1.185-.398 2.297-.791 2.875-2.184.578-1.394.068-2.459-.488-3.579l1.084-1.084c1.082.538 2.162 1.077 3.58.488 1.392-.577 1.785-1.69 2.183-2.875h1.534c.398 1.185.792 2.297 2.184 2.875 1.419.588 2.506.045 3.579-.488l1.084 1.084c-.556 1.121-1.065 2.187-.488 3.58.577 1.391 1.689 1.784 2.875 2.183v1.534c-1.188.398-2.302.791-2.877 2.183zm-7.125-5.951c1.654 0 3 1.346 3 3s-1.346 3-3 3-3-1.346-3-3 1.346-3 3-3zm0-2c-2.762 0-5 2.238-5 5s2.238 5 5 5 5-2.238 5-5-2.238-5-5-5z"
                            style="fill: #0084f6;" />
                        </svg>
                      </i>
                      <div class="dropdown">
                        <ul class="user-detail">
                          <li (click)="openPreferences()" class="asHover">
                            <i class="fa fa-low-vision" style="font-family: 'FontAwesome' ; display: inline-block;"></i>
                            <strong style="display: inline-block;">Show/Hide Columns</strong>
                          </li>
                        </ul>
                      </div>
                    </li>
                  </ul>
                </nav> -->
                                </section>
                            </div>
                        </div>
                    </div>

                    <!-- Advance Filter Div Element -->
                    <div class="AdFilter-field container hide" id="advanced-filter-section">

                        <div class="row">
                            <!-- Status -->
                            <div class="c-lg-4 c-md-4 c-sm-4">
                                <div class="field-wrapper">
                                    <label for="enquiryStatus">Enquiry Status</label>
                                    <select id="enquiryStatus" class="form-ctrl"
                                        [(ngModel)]="advancedFilterForm.filtered_statuses" name="status"
                                        style="border-radius: 4px;">
                                        <option value=""></option>
                                        <option *ngFor="let status of enqstatus" [value]="status.data_key">
                                            {{status.data_value}}</option>
                                    </select>

                                </div>
                            </div>

                            <!-- Campaigns -->
                            <div class="c-lg-4 c-md-4 c-sm-4">
                                <div class="field-wrapper"
                                    [ngClass]="{'has-value': advancedFilterForm.list_id != '-1' }">
                                    <label for="campaignList">Campaigns</label>
                                    <select id="campaignList" class="form-ctrl" [(ngModel)]="advancedFilterForm.list_id"
                                        name="campaign" style="border-radius: 4px;">
                                        <option value="-1"></option>
                                        <option *ngFor="let campaign of campaignList" [value]="campaign.list_id">
                                            {{campaign.list_name}}
                                        </option>
                                    </select>
                                </div>
                            </div>

                            <!-- Priority -->
                            <div class="c-lg-4 c-md-4 c-sm-4">
                                <div class="field-wrapper">
                                    <label for="enquiryPriority">Enquiry Priority</label>
                                    <select id="enquiryPriority" class="form-ctrl" style="border-radius: 4px;"
                                        [(ngModel)]="advancedFilterForm.priority" name="priority">
                                        <option></option>
                                        <option *ngFor="let priority of enqPriority" [value]="priority.data_key">
                                            {{priority.data_value}}
                                        </option>
                                    </select>

                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <!-- Followup Type -->
                            <div class="c-lg-4 c-md-4 c-sm-4">
                                <div class="field-wrapper">
                                    <label for="followupType">Enquiry Follow up Type</label>
                                    <select id="followupType" class="form-ctrl" style="border-radius: 4px;"
                                        [(ngModel)]="advancedFilterForm.follow_type" name="followType">
                                        <option></option>
                                        <option *ngFor="let follow of enqFollowType" [value]="follow.data_key">
                                            {{ follow.data_value }}
                                        </option>
                                    </select>
                                </div>
                            </div>

                            <!-- Update Date From -->
                            <div class="c-lg-4 c-md-4 c-sm-4">
                                <div class="field-wrapper datePickerBox">
                                    <label for="enquiryDateTo">Enquiry Changes From</label>
                                    <input type="text" value="" id="enquiryDateTo" style="border-radius: 4px;"
                                        class="form-ctrl bsDatepicker dateFormat"
                                        [(ngModel)]="advancedFilterForm.updateDateFrom" name="enquiryDateTo"
                                        readonly="true" bsDatepicker />

                                    <span class="date-clear" name="followupdate"
                                        (click)="advancedFilterForm.updateDateFrom = ''">clear</span>
                                </div>
                            </div>

                            <!-- Update Date To -->
                            <div class="c-lg-4 c-md-4 c-sm-4">
                                <div class="field-wrapper datePickerBox">
                                    <label for="enquiryDateFrom">Enquiry Changes To</label>
                                    <input type="text" value="" id="enquiryDateFrom" style="border-radius: 4px;"
                                        class="form-ctrl bsDatepicker dateFormat"
                                        [(ngModel)]="advancedFilterForm.updateDateTo" name="enquiryDateFrom"
                                        readonly="true" bsDatepicker />

                                    <span class="date-clear" name="followupdate"
                                        (click)="advancedFilterForm.updateDateTo = ''">clear</span>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <!-- Enquiry From Date -->
                            <div class="c-lg-4 c-md-4 c-sm-4">
                                <div class="field-wrapper datePickerBox">
                                    <label for="enquiryFromDate">Enquiry From Date</label>
                                    <input type="text" value="" id="enquiryFromDate" style="border-radius: 4px;"
                                        class="form-ctrl bsDatepicker dateFormat"
                                        [(ngModel)]="advancedFilterForm.enquireDateFrom" name="EFD" bsDatepicker
                                        readonly="true" />

                                    <span class="date-clear" name="followupdate"
                                        (click)="clearFilterType('enquireDateFrom')">clear</span>
                                </div>
                            </div>

                            <!-- Enquiry To Date -->
                            <div class="c-lg-4 c-md-4 c-sm-4">
                                <div class="field-wrapper datePickerBox">
                                    <label for="enquiryToDate">Enquiry To Date</label>
                                    <input type="text" value="" id="enquiryToDate" style="border-radius: 4px;"
                                        class="form-ctrl bsDatepicker dateFormat "
                                        [(ngModel)]="advancedFilterForm.enquireDateTo" name="ETD" bsDatepicker
                                        readonly="true" />

                                    <span class="date-clear" name="followupdate"
                                        (click)="clearFilterType('enquireDateTo')">clear</span>
                                </div>
                            </div>

                            <!-- Follow Up Date -->
                            <div class="c-lg-4 c-md-4 c-sm-4">
                                <div class="field-wrapper datePickerBox">
                                    <label for="followDate">Follow-Up Date</label>
                                    <input type="text" value="" id="followDate" style="border-radius: 4px;"
                                        class="form-ctrl bsDatepicker dateFormat"
                                        [(ngModel)]="advancedFilterForm.followUpDate" name="FD" readonly="true"
                                        bsDatepicker />

                                    <span class="date-clear" name="followupdate"
                                        (click)="clearFilterType('followUpDate')">clear</span>
                                </div>
                            </div>
                        </div>

                        <div class="row" *ngIf="flagJSON.isProfessional">
                            <!-- master Professional -->
                            <div class="c-lg-4 c-md-4 c-sm-4">
                                <div class="field-wrapper">
                                    <label for="editStandard">Master Course</label>
                                    <select id="editStandard" class="form-ctrl" style="border-radius: 4px;"
                                        [(ngModel)]="advancedFilterForm.standard_id"
                                        (ngModelChange)="fetchEnquirySubject($event)" name="editStandard">
                                        <option value="-1"></option>
                                        <option *ngFor="let std of enqStd" [value]="std.standard_id">
                                            {{std.standard_name}}</option>
                                    </select>
                                </div>
                            </div>

                            <!-- course Professional -->
                            <div class="c-lg-4 c-md-4 c-sm-4">
                                <div class="field-wrapper">
                                    <label for="forSubject">Course</label>
                                    <select id="forSubject" class="form-ctrl form-ctrl-multiple"
                                        style="border-radius: 4px;" [(ngModel)]="advancedFilterForm.subjectIdArray"
                                        name="subject" multiple>

                                        <option *ngFor="let subject of enqSubject" [value]="subject.subject_id">
                                            {{subject.subject_name}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <!-- Slot -->
                            <div class="c-lg-4 c-md-4 c-sm-4">
                                <div id="slotwrapper" class="field-wrapper"
                                    (click)="multiselectVisible($event.target.id)">
                                    <label for="assignCourses">Slots</label>
                                    <input id="slot" type="text" [ngModel]="varJson.selectedSlotsString" name="slots"
                                        style="border-radius: 4px;" class="form-ctrl" readonly="true" />

                                </div>
                                <div id="slotmulti" class="hide multiselect-wrapper"
                                    (mouseleave)="multiselectVisible('slot')">
                                    <div class="multiselect-wrapper-inner">
                                        <ul class="">
                                            <li *ngFor="let slot of slots">
                                                <div class="field-checkbox-wrapper">

                                                    <input type="checkbox" value="" name="slotLabel"
                                                        style="border-radius: 4px;" [(ngModel)]="slot.status"
                                                        (ngModelChange)="updateSlotSelected(slot)" class="form-checkbox"
                                                        id="slotLabel">
                                                    <label for="slotLabel">{{slot.label}}</label>
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <!-- Institute List  -->
                            <div class="c-lg-4 c-md-4 c-sm-4">
                                <div class="field-wrapper"
                                    [ngClass]="{'has-value': advancedFilterForm.school_id != '-1' }">
                                    <label for="schoolList">Institute Name</label>
                                    <select id="schoolList" class="form-ctrl" style="border-radius: 4px;"
                                        [(ngModel)]="advancedFilterForm.school_id" name="school">
                                        <option value="-1"></option>
                                        <option *ngFor="let school of schools" [value]="school.school_id">
                                            {{school.school_name}}</option>
                                    </select>
                                </div>
                            </div>

                            <!-- City List  -->
                            <!-- <div class="c-lg-4 c-md-4 c-sm-4">
                <div class="field-wrapper">
                  <label for="cityList">City</label>
                  <select id="cityList" class="form-ctrl" [(ngModel)]="advancedFilterForm.city" name="cityList" (ngModelChange)="onCitySelection($event)">
                    <option value=""></option>
                    <option *ngFor="let obj of cityList" [value]="obj.city">{{obj.city}}</option>
                  </select>
                </div>
              </div> -->

                            <!-- Area List  -->
                            <!-- <div class="c-lg-4 c-md-4 c-sm-4">
                <div class="field-wrapper">
                  <label for="areaList">Area</label>
                  <select id="areaList" class="form-ctrl" [(ngModel)]="advancedFilterForm.area" name="areaList">
                    <option value=""></option>
                    <option *ngFor="let obj of areaList" [value]="obj.area">{{obj.area}}</option>
                  </select>
                </div>
              </div> -->
                            <!-- Assigned -->
                            <div class="c-lg-4 c-md-4 c-sm-4" *ngIf="flagJSON.isEnquiryAdmin">
                                <div class="field-wrapper">
                                    <label for="assignTo">Assign To</label>
                                    <select id="assignTo" class="form-ctrl" style="border-radius: 4px;"
                                        [(ngModel)]="advancedFilterForm.assigned_to" name="assignTo">
                                        <option></option>
                                        <option *ngFor="let assigned of enqAssignTo" [value]="assigned.userid">
                                            {{ assigned.name }}
                                        </option>
                                    </select>

                                </div>
                            </div>

                            <!-- Lead Sources  -->
                            <div class="c-lg-4 c-md-4 c-sm-4">
                                <div class="field-wrapper" [ngClass]="{'has-value': advancedFilterForm.id == '-1' }">
                                    <label for="sourceList">Source</label>
                                    <select id="sourceList" class="form-ctrl" style="border-radius: 4px;"
                                        [(ngModel)]="advancedFilterForm.source_id" name="source">
                                        <option value="-1"></option>
                                        <option *ngFor="let source of sources" [value]="source.id">{{source.name}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="row">

                            <!-- Referred By -->
                            <div class="c-lg-4 c-md-4 c-sm-4">
                                <div class="field-wrapper">
                                    <label for="ReferredBy">Referred By</label>
                                    <select id="ReferredBy" class="form-ctrl" style="border-radius: 4px;"
                                        [(ngModel)]="advancedFilterForm.referred_by" name="referred_by">
                                        <option value="-1"></option>
                                        <option *ngFor="let source of referredByData" [value]="source.id">
                                            {{source.name}}</option>
                                    </select>
                                </div>
                            </div>

                            <div class="c-lg-4 c-md-4 c-sm-4">
                                <div class="field-wrapper"
                                    [ngClass]="{'has-value': advancedFilterForm.country_id != ''}">
                                    <label for="state">Country</label>
                                    <select id="state" class="form-ctrl" style="border-radius: 4px;"
                                        [(ngModel)]="advancedFilterForm.country_id" name="state"
                                        (ngModelChange)="getStateList()">
                                        <option value="-1">Select Country</option>
                                        <option title="{{country.country_name}}" [value]="country.id"
                                            *ngFor="let country of countryList">
                                            {{ (country.country_name.length > 30) ? (country.country_name | slice:0:30) + '...' : country.country_name }}
                                        </option>
                                    </select>
                                </div>
                            </div>

                            <div class="c-lg-4 c-md-4 c-sm-4">
                                <div class="field-wrapper" [ngClass]="{'has-value': advancedFilterForm.state_id != ''}">
                                    <label for="state">State</label>
                                    <select id="state" class="form-ctrl" style="border-radius: 4px;"
                                        [(ngModel)]="advancedFilterForm.state_id" name="state"
                                        (ngModelChange)="getCityList()">
                                        <option value="-1">Select State</option>
                                        <option title="{{state.state_name}}" [value]="state.state_id"
                                            *ngFor="let state of stateList">
                                            {{ (state.state_name.length > 30) ? (state.state_name | slice:0:30) + '...' : state.state_name }}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="c-lg-4 c-md-4 c-sm-4">
                                <div class="field-wrapper" [ngClass]="{'has-value': advancedFilterForm.city_id != ''}">
                                    <label for="city">City</label>
                                    <select id="city" class="form-ctrl" [(ngModel)]="advancedFilterForm.city_id"
                                        name="city" style="border-radius: 4px;" (ngModelChange)="getAreaList()">
                                        <option value="-1">Select City</option>
                                        <option title="{{city.city_name}}" [value]="city.city_id"
                                            *ngFor="let city of cityDetails">
                                            {{ (city.city_name.length > 30) ? (city.city_name | slice:0:30) + '...' : city.city_name }}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <!-- masterCourse course -->
                            <div *ngIf="!flagJSON.isProfessional && !schoolModel" class="c-lg-4 c-md-4 c-sm-4">
                                <div class="field-wrapper">
                                    <label for="editMc">Master Course</label>
                                    <select id="editMc" class="form-ctrl" name="editMc" style="border-radius: 4px;"
                                        [(ngModel)]="advancedFilterForm.master_course_name"
                                        (ngModelChange)="courseMasterChange($event)">
                                        <option value="-1"></option>
                                        <option *ngFor="let master of masterCourseData" [value]="master.master_course">
                                            {{master.master_course}}</option>
                                    </select>
                                </div>
                            </div>

                            <!-- course course-->
                            <div *ngIf="!flagJSON.isProfessional && !schoolModel" class="c-lg-4 c-md-4 c-sm-4">
                                <div class="field-wrapper">
                                    <label for="editCC">Course</label>
                                    <select id="editCC" class="form-ctrl form-ctrl-multiple" style="border-radius: 4px;"
                                        [(ngModel)]="advancedFilterForm.courseIdArray" name="editCC" multiple>
                                        <option *ngFor="let cc of course_course" [value]="cc.course_id">
                                            {{cc.course_name}}</option>
                                    </select>
                                </div>
                            </div>
                            <!-- subject Course -->
                            <div *ngIf="!flagJSON.isProfessional && !schoolModel" class="c-lg-4 c-md-4 c-sm-4">
                                <div class="field-wrapper">
                                    <label for="forSubject">Subject</label>
                                    <select multiple id="forSubject" class="form-ctrl form-ctrl-multiple"
                                        style="border-radius: 4px;" [(ngModel)]="advancedFilterForm.subjectIdArray"
                                        name="subject">
                                        <option *ngFor="let subject of enqSubject" [value]="subject.subject_id">
                                            {{subject.subject_name}}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <!-- standard Course-->
                            <div *ngIf="!flagJSON.isProfessional" class="c-lg-4 c-md-4 c-sm-4">
                                <div class="field-wrapper">
                                    <label for="editStandard">Standard</label>
                                    <select id="editStandard" class="form-ctrl"
                                        [(ngModel)]="advancedFilterForm.standard_id" style="border-radius: 4px;"
                                        (ngModelChange)="fetchEnquirySubject($event)" name="editStandard">
                                        <option value="-1"></option>
                                        <option *ngFor="let std of enqStd" [value]="std.standard_id">
                                            {{std.standard_name}}</option>
                                    </select>
                                </div>
                            </div>
                        </div>


                        <!-- Update Date -->
                        <!-- <div class="c-lg-4 c-md-4 c-sm-4 hide">
              <div class="field-wrapper datePickerBox">
                <label for="updateDate">Update Date</label>
                <input type="text" value="" id="updateDate" class="form-ctrl bsDatepicker dateFormat" [(ngModel)]="advancedFilterForm.updateDate"
                  name="UD" readonly="true" bsDatepicker />

                <span class="date-clear" name="followupdate" (click)="clearFilterType('updateDate')">clear</span>
              </div>
            </div> -->
                        <!--enquiry Custom Component -->
                        <ng-template [ngIf]="true" *ngFor="let component of filterCustomComponent; let i= index;">
                            <div class="row" *ngIf="checkCustomeComponentElement(i)">
                                <ng-template [ngIf]="true" *ngFor="let component of filterCustomComponent |slice:i:i+3">
                                    <div class="c-lg-4 c-md-4 c-sm-4" *ngIf="component.type == 1" input-def>
                                        <div class="field-wrapper" [ngClass]="{'has-value': component.value != ''}">
                                            <label for="{{component.id}}">{{component.label}} </label>
                                            <input type="text" value="" id="{{component.id}}"
                                                [(ngModel)]="component.value" class="form-ctrl"
                                                style="border-radius: 4px;" name="{{component.label}}" />

                                        </div>
                                    </div>

                                    <div class="c-lg-4 c-md-4 c-sm-4" *ngIf="component.type == 2" input-def>
                                        <br>
                                        <div class="field-checkbox-wrapper">

                                            <input class="form-checkbox" id="{{component.id}}" type="checkbox"
                                                [(ngModel)]="component.value" style="border-radius: 4px;"
                                                name="{{component.label}}" value="">
                                            <label for="{{component.id}}">{{component.label}} </label>

                                        </div>
                                    </div>

                                    <div class="c-lg-4 c-md-4 c-sm-4" *ngIf="component.type == 3" input-def>
                                        <div class="field-wrapper" [ngClass]="{'has-value': component.value != ''}">
                                            <label for="{{component.id}}">{{component.label}} </label>
                                            <select id="{{component.id}}" class="form-ctrl"
                                                [(ngModel)]="component.value" style="border-radius: 4px;"
                                                name="{{component.label}}">
                                                <option value=""></option>
                                                <option *ngFor="let opt of component.prefilled_data"
                                                    value="{{opt.data}}">{{opt.data}}
                                                </option>
                                            </select>


                                        </div>
                                    </div>

                                    <div class="c-lg-4 c-md-4 c-sm-4" *ngIf="component.type == 4 " input-def>
                                        <div id="{{component.id}}wrapper" class="field-wrapper"
                                            (click)="multiselectVisible($event.target.id)">
                                            <label for="{{component.id}}">{{component.label}} </label>
                                            <input id="{{component.id}}" type="text"
                                                [ngModel]="component.selectedString" style="border-radius: 4px;"
                                                name="{{component.label}}" class="form-ctrl" readonly="true" />

                                        </div>
                                        <div id="{{component.id}}multi" class="hide multiselect-wrapper"
                                            (mouseleave)="multiselectVisible(component.id)">
                                            <div class="multiselect-wrapper-inner">
                                                <ul class="">
                                                    <li *ngFor="let opt of component.prefilled_data">
                                                        <div class="field-checkbox-wrapper">

                                                            <input type="checkbox" value="" name="{{opt.data}}"
                                                                [(ngModel)]="opt.checked" style="border-radius: 4px;"
                                                                (ngModelChange)="updateMultiSelect(opt, component.id)"
                                                                class="form-checkbox" id="{{opt.data}}">
                                                            <label for="opt.data">{{opt.data}}</label>

                                                        </div>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="c-lg-4 c-md-4 c-sm-4" *ngIf="component.type == 5 " input-def>
                                        <div class="field-wrapper datePickerBox"
                                            [ngClass]="{'has-value': component.value != 'Invalid date'}">
                                            <label for="{{component.id}}">{{component.label}} </label>
                                            <input type="text" value="" readonly="true" id="{{component.id}}"
                                                [(ngModel)]="component.value" style="border-radius: 4px;"
                                                class="form-ctrl bsDatepicker" name="{{component.label}}"
                                                bsDatepicker />


                                        </div>
                                    </div>
                                </ng-template>
                            </div>
                        </ng-template>

                        <!-- Submitter -->
                        <div class="row">
                            <div class="c-lg-12 c-md-12 c-sm-12">
                                <div class="field-wrapper pull-left">
                                    <input type="button" class="btn filterSearchBtn fullBlue" value="Clear Filter"
                                        (click)="clearFilterAdvanced()" id="BtnClearAdvance" />
                                </div>
                                <div class="field-wrapper pull-left">
                                    <input type="button" class="btn filterSearchBtn fullBlue" value="Search Now"
                                        (click)="filterAdvanced()" id="BtnFilterAdvance" />
                                </div>

                            </div>
                        </div>

                    </div>

                </div>
            </section>

            <!-- Data Table and Pagination -->
            <section class="search-data">
                <!-- Enquiry DataTable -->
                <div class="" id="table-main" #tablemain>
                    <div class="table-scroll-wrapper">
                        <div class="">
                            <ng-robTable [records]="sourceEnquiry" [reset]="flagJSON.isSideBar"
                                [defaultSort]="varJson.sortBy" [tableName]="'enquiry'" [settings]="displayKeys"
                                (userRowSelect)="userRowSelect($event)" (rowsSelected)="getRowCount($event)"
                                [dataStatus]="varJson.fetchingDataMessage" [key1]="'followUpDate'"
                                [primaryKey]="'institute_enquiry_id'" (rowIdArr)="getSelectedEnquiries($event)"
                                (sortById)="sortTableById($event)" (sortDirection)="getDirection($event)">
                            </ng-robTable>
                        </div>
                    </div>
                </div>

                <!-- Paginator Here -->
                <div class="row filter-res pagination" #pager id="pager" style="width: 100%;">
                    <div class="c-lg-12 c-md-12 c-sm-12 align-right">
                        <pagination (goPage)="fectchTableDataByPage($event)" (goNext)="fetchNext()"
                            (goPrev)="fetchPrevious()" [pagesToShow]="10" [page]="varJson.PageIndex"
                            [perPage]="varJson.displayBatchSize" [sizeArr]="sizeArr"
                            (sizeChange)="updateTableBatchSize($event)" [count]="varJson.totalEnquiry">
                        </pagination>
                    </div>

                </div>
            </section>
        </section>

    </aside>

    <aside #mySidenav class="middle-full sidenav" [ngClass]="{'hide': !flagJSON.isSideBar}">
        <div class="sidewrapper">
            <a href="javascript:void(0)" title="close" class="closebtn"
                (click)="closeEnquiryFullDetails($event); false; $event.stopPropagation()" id="closeAnch1">

                <svg viewBox="0 0 24 24" width="24px" height="24px" x="0" y="0" preserveAspectRatio="xMinYMin meet"
                    class="artdeco-icon" focusable="false">
                    <path
                        d="M20,5.32L13.32,12,20,18.68,18.66,20,12,13.33,5.34,20,4,18.68,10.68,12,4,5.32,5.32,4,12,10.69,18.68,4Z"
                        class="large-icon" style="fill: currentColor"></path>
                </svg>
            </a>
            <enquiry-sidebar *ngIf="flagJSON.isSideBar" [enqAssignTo]="enqAssignTo" [enquiryRow]="enquiryFullDetail"
                [row]="selectedRow" [priorityArr]="enqPriority" [sourceList]="sources" [statusArr]="enqstatus"
                [customComp]="customCompid" [followupArr]="enqFollowType" (updateEnq)="virtualUpdateEnquiry($event)"
                (cancelUpdate)="closeEnquiryFullDetails($event); false; $event.stopPropagation()"
                [mainBranchAdmin]="isMainBranch" [subBranchAdmin]="flagJSON.subBranchSelected"
                [branchesList]="branchesList" (getUserList)="branchUpdated($event)"
                [masterCourseData]="masterCourseData" [standardArr]="enqStd" [subjectArr]="enqSubject"
                (fullEnquiryDetails)="completeEnquiryDeatils($event)"
                [closingReasonDataSource]="closingReasonDataSource">
            </enquiry-sidebar>
        </div>
    </aside>

    <!-- Enquiry update popup -->
    <app-enquiry-update-popup *ngIf="varJson.message === 'update'" [enqData]="varJson.enquiryInfo"
        (closePopUp)="closeUpdatePop($event)"></app-enquiry-update-popup>


    <!-- Delete PopUp -->
    <section id="popup" class="popupWrapper fadeIn" *ngIf="varJson.message === 'delete'">
        <div class="popup pos-abs">
            <div class="popup-wrapper pos-rel">
                <span class="closePopup pos-abs fbold show" id="popupCloseBtn" (click)="closePopup()">
                    <svg class="artdeco-icon" focusable="false" height="24px" preserveAspectRatio="xMinYMin meet"
                        viewBox="0 0 24 24" width="24px" x="0" y="0">
                        <path class="large-icon"
                            d="M20,5.32L13.32,12,20,18.68,18.66,20,12,13.33,5.34,20,4,18.68,10.68,12,4,5.32,5.32,4,12,10.69,18.68,4Z"
                            style="fill: currentColor"></path>
                    </svg>
                </span>
                <div class="popup-content">
                    <h2>Delete Enquiry - Enquiry No: {{selectedRow.enquiry_no}}</h2>
                    <div class="update-enquiry-form overflowHidden">
                        <div class="enquiry-update-history">
                            <h4>Are you Sure you wish to delete this data, it cannot be recovered later.</h4>
                        </div>
                        <div class="">
                            <div class="clearfix">
                                <aside class="pull-right popup-btn">
                                    <input type="button" value="Cancel" class="btn" (click)="closePopup()"
                                        id="BtncancelClose">
                                    <input type="button" value="Delete" class="fullBlue btn" (click)="deleteEnquiry()"
                                        id="BtndeleteClose">
                                </aside>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Convert PopUp -->
    <section id="popup" class="popupWrapper fadeIn" *ngIf="varJson.message === 'convert'">
        <div class="popup pos-abs">
            <div class="popup-wrapper pos-rel">
                <span class="closePopup pos-abs fbold show" id="popupCloseBtn" (click)="closePopup()">
                    <svg class="artdeco-icon" focusable="false" height="24px" preserveAspectRatio="xMinYMin meet"
                        viewBox="0 0 24 24" width="24px" x="0" y="0">
                        <path class="large-icon"
                            d="M20,5.32L13.32,12,20,18.68,18.66,20,12,13.33,5.34,20,4,18.68,10.68,12,4,5.32,5.32,4,12,10.69,18.68,4Z"
                            style="fill: currentColor"></path>
                    </svg>
                </span>

                <!-- If Not converted -->
                <div class="popup-content" *ngIf="!flagJSON.isConverted">
                    <h2>Convert Enquiry - Enquiry No: {{selectedRow.enquiry_no}}</h2>
                    <div class="update-enquiry-form overflowHidden">
                        <div class="enquiry-update-history">
                            <h4> You will be converting {{selectedRow.name}} to student, this is irreversible </h4>
                        </div>
                        <div class="">
                            <div class="clearfix">
                                <aside class="pull-right popup-btn">
                                    <input type="button" value="Cancel" class="btn" (click)="closePopup()"
                                        id="btnClosePopup">
                                    <input type="button" value="Convert" class="fullBlue btn"
                                        (click)="convertRow(selectedRow.data)" id="btnConvertRow">
                                </aside>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- If Enquiry Converted -->
                <div class="popup-content" *ngIf="flagJSON.isConverted">
                    <h2>Convert Enquiry - Enquiry No: {{selectedRow.enquiry_no}}</h2>
                    <div class="update-enquiry-form overflowHidden">
                        <div class="enquiry-update-history">
                            <h4>It Seems that this enquiry has already been converted to student</h4>
                        </div>
                        <div class="">
                            <div class="clearfix">
                                <aside class="pull-right popup-btn">
                                    <input type="button" value="Ok" class="btn" (click)="closePopup()"
                                        id="btnClosePopup2">
                                    <!-- <input type="button" value="Convert" class="redBtn btn" (click)="convertRow(selectedRow.data)"> -->
                                </aside>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
        </div>
    </section>

    <!--Registration Payment PopUp -->
    <section id="popup" class="popupWrapper fadeIn" *ngIf="varJson.message === 'payment'">
        <div class="popup pos-abs">
            <div class="popup-wrapper pos-rel">
                <span class="closePopup pos-abs fbold show" id="popupCloseBtn" (click)="closePopup()">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="9310 2185 16 16">
                        <g id="Group_1228" data-name="Group 1228" transform="translate(8298 1888)">
                            <g id="Group_1213" data-name="Group 1213" transform="translate(34.189 -7.77)">
                                <line id="Line_274" data-name="Line 274" class="cls-1" y2="19.798"
                                    transform="translate(992.81 305.77) rotate(45)" />
                                <line id="Line_275" data-name="Line 275" class="cls-1" x1="19.798"
                                    transform="translate(978.81 305.77) rotate(45)" />
                            </g>
                            <rect id="Rectangle_686" data-name="Rectangle 686" style="stroke:none;" class="cls-2"
                                width="16" height="16" transform="translate(1012 297)" />
                        </g>
                    </svg>
                </span>
                <div class="popup-content">
                    <h2>Registration Fee</h2>
                    <div class="registration-fee-form overflowHidden">
                        <div class="">

                            <!-- student has invoice and registered with status 11 -->
                            <div class="enquiry-update-history" *ngIf="flagJSON.hasReceipt">
                                <h4>
                                    A payment towards the selected enquiry has been updated, you may download the
                                    receipt for your reference
                                </h4>
                            </div>

                            <!-- any one of above case has failed -->
                            <div class="payment-form" *ngIf="!flagJSON.hasReceipt">

                                <!-- status admitted or registered but no open, inprogress or closed  -->
                                <div class="" *ngIf="flagJSON.isadmitted">
                                    <div class="row extraMargin">
                                        <div class="c-lg-6 c-md-6 c-sm-6">
                                            <div class="field-wrapper has-value">
                                                <label for="pDate">Payment Date</label>
                                                <input type="text" value="" id="pDate" class="form-ctrl bsDatepicker"
                                                    [ngModel]="registrationForm.paymentDate" name="pDate" bsDatepicker
                                                    readonly="true" />
                                            </div>
                                        </div>
                                        <div class="c-lg-6 c-md-6 c-sm-6">
                                            <div class="field-wrapper">
                                                <label for="paymentMode">Payment Mode</label>
                                                <select id="paymentMode" class="form-ctrl"
                                                    [(ngModel)]="registrationForm.paymentMode">
                                                    <option></option>
                                                    <option *ngFor="let payment of paymentMode" [value]="payment">
                                                        {{payment}}
                                                    </option>
                                                </select>

                                            </div>
                                        </div>
                                    </div>

                                    <div class="row extraMargin">
                                        <div class="c-lg-6 c-md-6 c-sm-6">
                                            <div class="field-wrapper">
                                                <label for="remark">Amount</label>
                                                <input type="text" value="" id="remark" class="form-ctrl"
                                                    [(ngModel)]="registrationForm.amount" name="remark" />
                                            </div>
                                        </div>
                                        <div class="c-lg-6 c-md-6 c-sm-6">
                                            <div class="field-wrapper">
                                                <label for="referenceNo">Reference No.</label>
                                                <input type="text" value="" id="referenceNo" class="form-ctrl"
                                                    [(ngModel)]="registrationForm.reference" name="reference" />
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- status open, inprogress or converted but not closed-->
                                <h4 *ngIf="flagJSON.notClosednAdmitted">
                                    The requested enquiry has not yet been converted to student, please select the
                                    convert to student option from menu.
                                </h4>

                                <!-- status closed-->
                                <h4 *ngIf="flagJSON.isClosed">
                                    The Enquiry has been closed or converted as a student.
                                </h4>

                            </div>

                            <!-- Icon for DownLoad -->
                            <div class="row" *ngIf="flagJSON.hasReceipt">
                                <div class="c-lg-12 c-md-12 c-sm-12">
                                    <ul class="print-output-section">

                                        <!-- <li>
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="9177 266 26 22">
                            <g id="Group_1224" data-name="Group 1224" transform="translate(8100 -6)">
                              <g id="Group_1222" data-name="Group 1222">
                                <g id="Group_1212" data-name="Group 1212">
                                  <path id="Path_163" data-name="Path 163" class="cls-1" d="M37,22.478h4.174a1.047,1.047,0,0,0,1.043-1.043V12.043A1.047,1.047,0,0,0,41.174,11H39.087"
                                    transform="translate(1059.782 267.47)" />
                                  <path id="Path_164" data-name="Path 164" class="cls-1" d="M4.13,11H2.043A1.047,1.047,0,0,0,1,12.043v9.391a1.047,1.047,0,0,0,1.043,1.043H6.217"
                                    transform="translate(1077 267.47)" />
                                  <rect id="Rectangle_269" data-name="Rectangle 269" class="cls-1" width="13.565" height="10.435" transform="translate(1083.217 273)"
                                  />
                                  <rect id="Rectangle_270" data-name="Rectangle 270" class="cls-1" width="13.565" height="5.217" transform="translate(1083.217 287.77)"
                                  />
                                  <line id="Line_125" data-name="Line 125" class="cls-1" x2="19.826" transform="translate(1080.087 283.94)" />
                                  <line id="Line_126" data-name="Line 126" class="cls-1" y2="1.094" transform="translate(1080.609 286.128)" />
                                  <line id="Line_127" data-name="Line 127" class="cls-1" y1="6.564" transform="translate(1081.13 275.735)" />
                                  <line id="Line_128" data-name="Line 128" class="cls-1" y1="6.564" transform="translate(1098.87 275.735)" />
                                </g>
                                <rect id="Rectangle_690" data-name="Rectangle 690" class="cls-2" width="26" height="22" transform="translate(1077 272)" style="stroke:none"
                                />
                              </g>
                            </g>
                          </svg>
                          <span>Print Fee Receipt</span>
                    </li> -->

                                        <li class="svg-icon" (click)="downloadReceiptPdf()">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="14362 435 26 22">
                                                <g id="Group_1230" data-name="Group 1230"
                                                    transform="translate(13654 -6)">
                                                    <rect id="Rectangle_695" data-name="Rectangle 695" class="cls-1"
                                                        width="26" height="22" transform="translate(708 441)"
                                                        style="stroke:none" />
                                                    <g id="Symbol_12_5" data-name="Symbol 12  5"
                                                        transform="translate(53 -16)">
                                                        <path id="Path_161" data-name="Path 161" class="cls-2"
                                                            d="M21,32v3.158H1V32" transform="translate(657 442.842)" />
                                                        <path id="Path_162" data-name="Path 162" class="cls-2"
                                                            d="M8,19l6.316,6.316L20.632,19"
                                                            transform="translate(653.684 449)" />
                                                        <line id="Line_124" data-name="Line 124" class="cls-2"
                                                            y1="16.316" transform="translate(668 458)" />
                                                    </g>
                                                </g>
                                            </svg>
                                            <a id="reg-pdf-link"></a>
                                            <span>PDF Download</span>
                                        </li>

                                    </ul>
                                </div>
                            </div>

                            <!-- Footer 1-->
                            <div class="row" *ngIf="!flagJSON.hasReceipt">

                                <div class="c-lg-12 c-md-12 c-sm-12" *ngIf="flagJSON.isadmitted">
                                    <aside class="pull-right popup-btn">
                                        <input type="button" value="Cancel" class="btn" (click)="closePopup()"
                                            id="BtncancelPopup">
                                        <input type="button" value="Save" class="btn fullBlue"
                                            (click)="registerPayment()" id="BtnregisterPayment">
                                    </aside>
                                </div>

                                <div class="c-lg-12 c-md-12 c-sm-12" *ngIf="flagJSON.notClosednAdmitted">
                                    <aside class="pull-right popup-btn">
                                        <input type="button" value="Ok" class="btn" (click)="closePopup()"
                                            id="btnclosePopup">
                                    </aside>
                                </div>

                                <div class="c-lg-12 c-md-12 c-sm-12" *ngIf="flagJSON.isClosed">
                                    <aside class="pull-right popup-btn">
                                        <input type="button" value="Ok" class="btn" (click)="closePopup()"
                                            id="btnOpenClose">
                                    </aside>
                                </div>

                            </div>

                            <!-- Footer 2-->
                            <div class="row" *ngIf="flagJSON.hasReceipt">
                                <div class="c-lg-12 c-md-12 c-sm-12">
                                    <aside class="pull-right popup-btn">
                                        <input type="button" value="Ok" class="btn" (click)="closePopup()"
                                            id="btnOpenClosePopup">
                                    </aside>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Bulk Assign PopUp -->
    <section id="popup" class="popupWrapper fadeIn" *ngIf="flagJSON.isAssignEnquiry">
        <div class="popup pos-abs" style="    top: 14% !important;">
            <div class="popup-wrapper pos-rel">
                <span class="closePopup pos-abs fbold show" id="popupCloseBtn" (click)="bulkAssignEnquiriesClose()">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="9310 2185 16 16">
                        <g id="Group_1228" data-name="Group 1228" transform="translate(8298 1888)">
                            <g id="Group_1213" data-name="Group 1213" transform="translate(34.189 -7.77)">
                                <line id="Line_274" data-name="Line 274" class="cls-1" y2="19.798"
                                    transform="translate(992.81 305.77) rotate(45)" />
                                <line id="Line_275" data-name="Line 275" class="cls-1" x1="19.798"
                                    transform="translate(978.81 305.77) rotate(45)" />
                            </g>
                            <rect id="Rectangle_686" data-name="Rectangle 686" style="stroke:none;" class="cls-2"
                                width="16" height="16" transform="translate(1012 297)" />
                        </g>
                    </svg>
                </span>
                <div class="popup-content">
                    <h2>Assign {{selectedRowGroup.length}} Enquiries </h2>
                    <div class="update-enquiry-form overflowHidden">
                        <div class="enquiry-update-history">
                            <div class="field-wrapper"
                                *ngIf="isMainBranch == 'Y' || flagJSON.subBranchSelected == true">
                                <div class="row">
                                    <div class="c-lg-6 c-md-6 c-sm-6">
                                        <label for="brchList">Branch</label>
                                        <select id="brchList" class="form-ctrl" name="brchList"
                                            [(ngModel)]="assignMultipleForm.source_instituteId"
                                            (ngModelChange)="branchUpdated(assignMultipleForm.source_instituteId)">
                                            <option value="-1"></option>
                                            <option *ngFor="let branch of branchesList" [value]="branch.institute_id">
                                                {{ branch.institute_name }}
                                            </option>
                                        </select>
                                    </div>
                                    <div class="c-lg-4 c-md-4 c-sm-4">
                                        <label for="assignTo">Assign To</label>
                                        <select id="assignTo" class="form-ctrl"
                                            [(ngModel)]="assignMultipleForm.assigned_to" name="assignTo">
                                            <option></option>
                                            <option *ngFor="let assigned of enqAssignTo" [value]="assigned.userid">
                                                {{ assigned.name }}
                                            </option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="field-wrapper" style="max-width: 70%" *ngIf="isMainBranch=='N'">
                                <div class="row">
                                    <label for="assignTo">Assign To</label>
                                    <select id="assignTo" class="form-ctrl" [(ngModel)]="assignMultipleForm.assigned_to"
                                        name="assignTo">
                                        <option></option>
                                        <option *ngFor="let assigned of enqAssignTo" [value]="assigned.userid">
                                            {{ assigned.name }}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="">
                            <div class="clearfix">
                                <aside class="pull-right popup-btn">
                                    <input type="button" value="Cancel" class="btn" (click)="bulkAssignEnquiriesClose()"
                                        id="btn4">
                                    <input type="button" value="Assign Enquiries" class="fullBlue btn"
                                        (click)="bulkAssignEnquiries()" id="BtnassignEnquiries">
                                </aside>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- SMS PopUp Single-->
    <section id="popup" class="popupWrapper fadeIn" *ngIf="varJson.message === 'sms'">
        <!-- -->
        <div class="popup pos-abs popup-body-container">
            <div class="popup-wrapper pos-rel" style="height: 80%;">

                <span class="closePopup pos-abs fbold show" id="popupCloseBtn" (click)="closePopup()">
                    <svg class="artdeco-icon" focusable="false" height="24px" preserveAspectRatio="xMinYMin meet"
                        viewBox="0 0 24 24" width="24px" x="0" y="0">
                        <path class="large-icon"
                            d="M20,5.32L13.32,12,20,18.68,18.66,20,12,13.33,5.34,20,4,18.68,10.68,12,4,5.32,5.32,4,12,10.69,18.68,4Z"
                            style="fill: currentColor"></path>
                    </svg>
                </span>

                <div class="popup-content">
                    <h2>Send SMS</h2>
                    <div class="sms-form sms-popup-content">
                        <div class="sms-update">
                            <aside class="pull-left sms-table">
                                <div class="sms-top-section">
                                    <!-- Create New SMS Toggler -->
                                    <div class="row">
                                        <div class="c-lg-12">
                                            <div class="clearFix add-edit">
                                                <a class="expend-box" (click)="addNewMessage()">
                                                    <i class="add-sms" id="sms-toggler-icon">+</i>
                                                    <span>Create New Sms</span>
                                                </a>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Message TextArea Here -->
                                    <div class="row" *ngIf="flagJSON.isMessageAddOpen">
                                        <section class="clearFix new-sms-form">
                                            <div class="row">
                                                <div class="c-lg-8 pull-left new-sms-wrapper">
                                                    <textarea cols="1" rows="5" class="new-sms-textarea"
                                                        autocomplete="off" role="textbox" aria-autocomplete="list"
                                                        placeholder="Enter your SMS here"
                                                        [(ngModel)]="newSmsString.data" aria-haspopup="true" value=""
                                                        id="listTxt"></textarea>

                                                    <p>Message characters : {{newSmsString.data.length}}</p>
                                                </div>

                                                <div class="c-lg-4 pull-right">
                                                    <aside class="pull-left create-cancel-small">
                                                        <input type="button" value="Cancel" class="btn cancle"
                                                            (click)="addNewMessage()" id="Btncancel7">
                                                        <input type="button" class="btn fullBlue" value="Save SMS"
                                                            (click)="addNewSmsTemplate()" id="BtnsaveSms">
                                                    </aside>
                                                </div>

                                            </div>
                                        </section>
                                    </div>

                                    <!-- Message Header -->
                                    <h3>Message List</h3>

                                    <!-- Length of SMS Total and SearchBar -->
                                    <div class="row sms-table-head">
                                        <div class="c-lg-7 c-md-7 c-sm-7" style="padding-top: 10px;">
                                            <div id="approvedSms" class="sms-tab active" style="margin-left: 5px;"
                                                (click)="switchSmsTab('approvedSms')">
                                                <label style="cursor: pointer">Approved</label>
                                            </div>
                                            <div id="openSms" class="sms-tab" (click)="switchSmsTab('openSms')">
                                                <label style="cursor: pointer">Open</label>
                                            </div>
                                        </div>
                                        <div class="c-lg-5 c-md-5 c-sm-5 align-right">
                                            <!-- <div class="search-filter-wrapper">
                        <input type="text" class="sms-search-field" placeholder="Search SMS" #smssearch [(ngModel)]="smsSearchData" name="searchData"
                          (keyup.enter)="onSearch(smssearch.value)">
                      </div> -->
                                        </div>
                                    </div>

                                </div>
                                <!-- Table Here -->
                                <div class="sms-middle-section">
                                    <div class="table table-responsive table-container table-data-overflow">
                                        <table>
                                            <thead>
                                                <tr>
                                                    <th>
                                                        <label>
                                                            <a class="cursor-icon"
                                                                id="cursorAnch1">{{smsHeader.message.title}}</a>
                                                        </label>
                                                    </th>
                                                    <th style="width: 18%;">
                                                        <label>
                                                            <a class="cursor-icon"
                                                                id="cursorAnch2">{{smsHeader.date.title}}</a>
                                                        </label>
                                                    </th>
                                                    <th>
                                                        <label>
                                                            <a class="cursor-icon"
                                                                id="cursorAnch3">{{smsHeader.action.title}}</a>
                                                        </label>
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody *ngIf="flagJSON.isApprovedTab">
                                                <tr *ngFor="let row of smsSourceApproved; let i = index;"
                                                    (click)="appSmsSelected(row, i)">
                                                    <td style="text-overflow: ellipsis">
                                                        <span [innerHTML]="row.message"></span>
                                                    </td>
                                                    <td style="width: 18%;">
                                                        {{row.date}}
                                                    </td>
                                                    <td>
                                                        <enquiry-sms-action>
                                                        </enquiry-sms-action>
                                                    </td>
                                                </tr>
                                                <tr *ngIf="smsSourceApproved.length == 0">
                                                    <td colspan="3">
                                                        No Message List Found
                                                    </td>
                                                </tr>
                                            </tbody>
                                            <tbody *ngIf="flagJSON.isAllSelected">
                                                <tr *ngFor="let row of smsSourceOpen; let i = index;"
                                                    (click)="opSmsSelected(row, i)">
                                                    <td style="text-align: left; text-overflow: ellipsis">
                                                        <span [innerHTML]="row.message"></span>
                                                    </td>
                                                    <td style="width: 18%;">
                                                        {{row.date}}
                                                    </td>
                                                    <td>
                                                        <enquiry-sms-action>
                                                        </enquiry-sms-action>
                                                    </td>
                                                </tr>
                                                <tr *ngIf="smsSourceOpen.length == 0">
                                                    <td colspan="3">
                                                        No Message List Found
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                            </aside>


                            <aside class="pull-right sms-preview">
                                <div class="sms-preview-header">
                                    <div class="row">
                                        <div class="c-lg-6 c-md-6 c-sm-6">
                                            <h4>Enquiry No. {{smsSelectedRows.enquiry_no}} Selected</h4>
                                        </div>
                                        <div class="c-lg-6 c-md-6 c-sm-6" style="padding:24px 0px;">
                                            <a style="cursor:pointer;" (click)="closePopup()"
                                                id="cursorAnch5">Change</a>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="c-lg-12 c-md-12 c-sm-12">
                                            Available SMS Quota: {{varJson.availableSMS}}
                                        </div>
                                    </div>
                                </div>
                                <div class="sms-preview-content">
                                    <div class="field-sms-wrapper">
                                        <textarea placeholder="Select SMS to preview or edit to update template"
                                            rows="20" cols="1" autocomplete="off" role="textbox"
                                            aria-autocomplete="list" aria-haspopup="true" id="sms-content" value=""
                                            [(ngModel)]="selectedSMS.message"
                                            [disabled]="!flagJSON.smsBtnToggle"></textarea>
                                    </div>
                                </div>
                                <div class="sms-preview-footer">
                                    <div class="">
                                        <div class="clearfix">
                                            <aside class="popup-btn">
                                                <input type="button" value="Cancel Edit" class="btn"
                                                    *ngIf="flagJSON.smsBtnToggle" (click)="cancelSmsEdit()"
                                                    id="BtncancelSmsEdit">
                                                <input type="button" value="Save Template" class="fullBlue btn"
                                                    *ngIf="flagJSON.smsBtnToggle" (click)="saveEditedSms()"
                                                    id="BtnsaveEditedSms">
                                                <input type="button" value="Cancel" class="btn"
                                                    *ngIf="!flagJSON.smsBtnToggle" (click)="closePopup()"
                                                    id="Btncancel8">
                                                <input type="button" value="Send SMS" class="fullBlue btn"
                                                    *ngIf="!flagJSON.smsBtnToggle" (click)="sendSmsTemplate()"
                                                    id="BtnsendSms5">
                                            </aside>
                                        </div>
                                    </div>
                                </div>
                            </aside>

                        </div>
                    </div>
                </div>
            </div>
        </div>

    </section>

    <!-- SMS PopUp MultiRow Selected-->
    <section id="popup" class="popupWrapper fadeIn" *ngIf="flagJSON.isMultiSms">
        <!--  -->
        <div class="popup pos-abs popup-body-container" style="top: 10% !important;">
            <div class="popup-wrapper pos-rel" style="height: 95%;">

                <span class="closePopup pos-abs fbold show" id="popupCloseBtn" (click)="closeBulkSms()">
                    <svg class="artdeco-icon" focusable="false" height="24px" preserveAspectRatio="xMinYMin meet"
                        viewBox="0 0 24 24" width="24px" x="0" y="0">
                        <path class="large-icon"
                            d="M20,5.32L13.32,12,20,18.68,18.66,20,12,13.33,5.34,20,4,18.68,10.68,12,4,5.32,5.32,4,12,10.69,18.68,4Z"
                            style="fill: currentColor"></path>
                    </svg>
                </span>

                <div class="popup-content" style="min-height: 85vh;max-height: 85vh;">
                    <h2>Send Notification </h2>
                    <div class="common-tab">
                        <div class="row">
                            <div class="menu_list c-lg-6 c-md-6 c-sm-6"
                                [ngClass]="{'active':flagJSON.notificationType=='SMS'?true:false}"
                                (click)="sendNotificationType('SMS')">
                                Send SMS
                            </div>
                            <div class="menu_list c-lg-6 c-md-6 c-sm-6"
                                [ngClass]="{'active':flagJSON.notificationType=='Email'?true:false}"
                                (click)="sendNotificationType('Email')">
                                Send Email
                            </div>
                            <div class="menu_list c-lg-6 c-md-6 c-sm-6"
                                [ngClass]="{'active':flagJSON.notificationType=='sendGrid'?true:false}"
                                (click)="showSendGridData('sendGrid')" style="width: 25%;" *ngIf="isSendGridEnable">
                                Send Email using SendGrid
                            </div>
                        </div>
                    </div>
                    <div class="sms-form sms-popup-content"
                        *ngIf="flagJSON.notificationType=='Email'|| flagJSON.notificationType=='SMS'">
                        <div class="sms-update">

                            <aside class="pull-left sms-table">
                                <div class="sms-top-section">
                                    <!-- Create New SMS Toggler -->
                                    <div class="row">
                                        <div class="c-lg-12">
                                            <div class="clearFix add-edit">
                                                <a class="expend-box" (click)="addNewMessage()">
                                                    <i class="add-sms" id="sms-toggler-icon">+</i>
                                                    <span>Create New Sms</span>
                                                </a>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Message TextArea Here -->
                                    <div class="row" *ngIf="flagJSON.isMessageAddOpen">
                                        <section class="clearFix new-sms-form">
                                            <div class="row">
                                                <div class="c-lg-8 pull-left new-sms-wrapper">
                                                    <textarea cols="1" rows="5" *ngIf="flagJSON.notificationType=='SMS'"
                                                        class="new-sms-textarea" autocomplete="off" role="textbox"
                                                        aria-autocomplete="list" placeholder="Enter your SMS here"
                                                        [(ngModel)]="newSmsString.data" aria-haspopup="true" value=""
                                                        id="listTxt"
                                                        (ngModelChange)="countNumberOfMessage()"></textarea>
                                                    <!-- Added editor for email formatting ashwini kumar gupta -->
                                                    <editor [init]="editorConf"
                                                        *ngIf="flagJSON.notificationType=='Email'"
                                                        apiKey="xix5hq71alw64jp2ufl9fo6nddnhg91n6h7w2afn043v538t"
                                                        (ngModelChange)="countNumberOfMessage()"
                                                        [(ngModel)]="newSmsString.data"
                                                        placeholder="Enter your SMS here">
                                                    </editor>
                                                    <!-- End -->
                                                    <div
                                                        style="width:100%; display:flex; justify-content:space-between;">
                                                        <span>Character Count : {{newSmsString.data.length}}</span>
                                                        <span>Message Count :
                                                            <span
                                                                [ngClass]="{'red' : messageCount >= 2}">{{messageCount}}</span>
                                                        </span>
                                                    </div>
                                                </div>

                                                <div class="c-lg-4 pull-right" style="margin-top: 16px;">
                                                    <aside class="pull-left create-cancel-small">
                                                        <input type="button" value="Cancel" class="btn cancle"
                                                            (click)="addNewMessage()">
                                                        <input type="button" class="btn fullBlue" value="Save SMS"
                                                            (click)="addNewSmsTemplate()">
                                                    </aside>
                                                </div>

                                            </div>
                                        </section>
                                    </div>

                                    <!-- Message Header -->

                                    <h3>Message List</h3>


                                    <!-- Length of SMS Total and SearchBar -->
                                    <div class="row sms-table-head">
                                        <div class="c-lg-7 c-md-7 c-sm-7" style="padding-top: 10px;">
                                            <div id="approvedSms" class="sms-tab active" style="margin-left: 5px;"
                                                (click)="switchSmsTab('approvedSms')">
                                                <label style="cursor: pointer">Approved</label>
                                            </div>
                                            <div id="openSms" class="sms-tab" (click)="switchSmsTab('openSms')">
                                                <label style="cursor: pointer">Open</label>
                                            </div>
                                        </div>
                                        <div class="c-lg-5 c-md-5 c-sm-5 align-right">
                                            <!-- <div class="search-filter-wrapper">
                            <input type="text" class="sms-search-field" placeholder="Search SMS" #smssearch [(ngModel)]="smsSearchData" name="searchData"
                              (keyup.enter)="onSearch(smssearch.value)">
                          </div> -->
                                        </div>
                                    </div>

                                </div>

                                <div class="sms-middle-section">
                                    <div class="table table-responsive table-container table-data-overflow">
                                        <table class="tableBodyScroll">
                                            <thead>
                                                <tr>
                                                    <!-- <th></th> -->
                                                    <th>
                                                        <label>
                                                            <a class="cursor-icon" id="cursorAnch11">{{smsHeader.message.title}}</a>
                                                        </label>
                                                    </th>
                                                    <th style="width: 18%;">
                                   <label>
                                        <a class="cursor-icon" id="cursorAnch12">{{smsHeader.date.title}}</a>
                                    </label>
                                </th>
                                <th style="text-align: center;">
                                    <label>
                                        <a class="cursor-icon" id="cursorAnch13">{{smsHeader.action.title}}</a>
                                    </label>
                                </th>
                            </tr>
                        </thead>
                        <!-- Added conditon for SMS and email  Ashwini kumar gupta -->
                        <!-- SMS -->
                        <tbody *ngIf="flagJSON.isApprovedTab && flagJSON.notificationType=='SMS'">
                            <tr *ngFor="let row of smsSourceApproved; let i = index;" (click)="appSmsSelected(row, i)">
                                <!-- <td>
                            <div class="field-radio-wrapper">
                              <label for="appradiosms{{i}}"></label>
                              <input type="radio" name="smsTable" class="form-radio" id="appradiosms{{i}}">
                            </div>
                          </td> -->
                                <td>
                                    <span [innerHTML]="row.message"></span>
                                </td>
                                <td style="width: 18%;">
                                    {{row.date}}
                                </td>
                                <td>
                                    <enquiry-sms-action style="text-align: center;">
                                    </enquiry-sms-action>
                                </td>
                            </tr>
                            <tr *ngIf=" smsSourceApproved.length ==0">
                                <td colspan="3">
                                    No Message List Found
                                </td>
                            </tr>
                        </tbody>
                        <tbody *ngIf="flagJSON.isAllSelected && flagJSON.notificationType=='SMS'">
                            <tr *ngFor="let row of smsSourceOpen; let i = index;" (click)="opSmsSelected(row, i)">
                                <!-- <td>
                            <div class="field-radio-wrapper">
                              <label for="oppradiosms{{i}}"></label>
                              <input type="radio" name="smsTable" class="form-radio" id="opradiosms{{i}}">
                            </div>
                          </td> -->
                                <td>
                                    <span [innerHTML]="row.message"></span>
                                </td>
                                <td style="width: 18%;">
                                    {{row.date}}
                                </td>
                                <td class="sms-Action-td" style="display:block">
                                    <span class="change-status" [ngClass]="{hideElement : (!showApproveButtons(row))}"
                                        style="display: inline-block">
                                        <i class="fas fa-check" (click)="approveRejectSms(row , '1')"
                                            style="font-family: FontAwesome;font-size: 25px;color: green;"></i>
                                        <i class="fa fa-times" (click)="approveRejectSms(row,'2')"
                                            style="font-family: FontAwesome;font-size: 25px;margin-left: 5px;"></i>
                                    </span>
                                    <enquiry-sms-action style="display: inline-block"></enquiry-sms-action>
                                </td>
                            </tr>
                            <tr *ngIf=" smsSourceOpen.length ==0">
                                <td colspan="3">
                                    No Message List Found
                                </td>
                            </tr>
                        </tbody>
                        <!-- Email -->
                        <tbody *ngIf="flagJSON.isApprovedTab && flagJSON.notificationType=='Email'">
                            <tr *ngFor="let row of emailSourceApproved; let i = index;"
                                (click)="appSmsSelected(row, i)">
                                <td>
                                    <span [innerHTML]="row.message"></span>
                                </td>
                                <td style="width: 18%;">
                                    {{row.date}}
                                </td>
                                <td>
                                    <enquiry-sms-action>
                                    </enquiry-sms-action>
                                </td>
                            </tr>
                            <tr *ngIf=" emailSourceApproved.length ==0">
                                <td colspan="3">
                                    No Message List Found
                                </td>
                            </tr>
                        </tbody>
                        <tbody *ngIf="flagJSON.isAllSelected && flagJSON.notificationType=='Email'">
                            <tr *ngFor="let row of emailSourceOpen; let i = index;" (click)="opSmsSelected(row, i)">
                                <td>
                                                        <span [innerHTML]="row.message"></span>
                                                    </td>
                                                    <td style="width: 18%;">
                                                        {{row.date}}
                                                    </td>
                                                    <td class="sms-Action-td" style="display:block;text-align: center;">
                                                        <span class="change-status"
                                                            [ngClass]="{hideElement : (!showApproveButtons(row))}"
                                                            style="display: inline-block">
                                                            <i class="fas fa-check"
                                                                (click)="approveRejectSms(row , '1')" title="Approve"
                                                                style="font-family: FontAwesome;font-size: 25px;color: green;"></i>
                                                            <i class="fa fa-times" (click)="approveRejectSms(row,'2')"
                                                                title="Reject"
                                                                style="font-family: FontAwesome;font-size: 25px;margin-left: 5px;"></i>
                                                        </span>
                                                        <enquiry-sms-action style="display: inline-block;">
                                                        </enquiry-sms-action>
                                                    </td>
                                                </tr>
                                                <tr *ngIf=" emailSourceOpen.length ==0">
                                                    <td colspan="3">
                                                        No Message List Found
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                            </aside>


                            <aside class="pull-right sms-preview">
                                <div style="    margin-bottom: 5px;">
                                    <div class="row">
                                        <div class="c-lg-6 c-md-6 c-sm-6">
                                            <h4>{{smsSelectedRowsLength}} Users Selected</h4>
                                        </div>
                                        <div class="c-lg-6 c-md-6 c-sm-6" style="padding:24px 0px;">
                                            <a style="cursor:pointer;" (click)="closeBulkSms()"
                                                id="closeBulkAnch4">Change</a>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="c-lg-12 c-md-12 c-sm-12" *ngIf="flagJSON.notificationType=='Email'">
                                            Available Email Quota: {{varJson.institute_email_quota_available}}
                                        </div>
                                        <div class="c-lg-12 c-md-12 c-sm-12" *ngIf="flagJSON.notificationType=='SMS'">
                                            Available SMS Quota: {{varJson.availableSMS}}
                                        </div>
                                    </div>
                                    <div class="row" style="padding: 10px 0px; "
                                        *ngIf="flagJSON.notificationType=='Email'">
                                        <div class="c-lg-12 c-md-12 c-sm-12" style="padding-bottom: 5px">
                                            <label>Subject
                                                <span class="danger">*</span>
                                            </label>
                                        </div>
                                        <div class="c-lg-12 c-md-12 c-sm-12">
                                            <input type="text" placeholder="Email Subject" [(ngModel)]="emailSubject"
                                                name="searchEmailData">
                                        </div>
                                    </div>
                                </div>
                                <div class="sms-preview-content">
                                    <div class="field-sms-wrapper">
                                        <!-- Added Editor for email formatting  By Ashwini kumar gupta-->
                                        <textarea placeholder="Edit Message Here" rows="20" cols="1"
                                            *ngIf="flagJSON.notificationType=='SMS'" autocomplete="off" role="textbox"
                                            aria-autocomplete="list" aria-haspopup="true" id="sms-content" value=""
                                            [(ngModel)]="selectedSMS.message" [disabled]="!flagJSON.smsBtnToggle"
                                            (ngModelChange)="countNumberOfMessageForEdit()"></textarea>
                                        <editor [init]="editorConf" id="email-content"
                                            *ngIf="flagJSON.notificationType=='Email'"
                                            [disabled]="!flagJSON.smsBtnToggle"
                                            apiKey="xix5hq71alw64jp2ufl9fo6nddnhg91n6h7w2afn043v538t"
                                            [(ngModel)]="selectedSMS.message"
                                            (ngModelChange)="countNumberOfMessageForEdit()"></editor>
                                        <!-- End -->
                                        <div
                                            style="width:100%; display:flex; justify-content:space-between;font-size:12px">
                                            <span>Character Count : {{selectedSMS.message.length}}</span>
                                            <span>Message Count :
                                                <span
                                                    [ngClass]="{'red' : messageCountForEdit >= 2}">{{messageCountForEdit}}</span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="sms-preview-footer">
                                    <div class="">
                                        <div class="clearfix">
                                            <aside class="popup-btn">
                                                <input type="button" value="Cancel" class="btn"
                                                    *ngIf="flagJSON.smsBtnToggle" (click)="cancelSmsEdit()"
                                                    id="BtncancelEditSms">
                                                <input type="button" value="Save" class="fullBlue btn"
                                                    *ngIf="flagJSON.smsBtnToggle" (click)="saveEditedSms()"
                                                    id="BtnsaveSmsEdited">
                                                <input type="button" value="Cancel" class="btn"
                                                    *ngIf="!flagJSON.smsBtnToggle" (click)="closeBulkSms()"
                                                    id="Btncancel0">
                                                <input type="button" value="Send SMS" class="fullBlue btn"
                                                    *ngIf="(!flagJSON.smsBtnToggle)&&(flagJSON.notificationType=='SMS')"
                                                    (click)="sendSmsTemplate()" id="btn0">
                                                <input type="button" value="Send Email" class="btn fullBlue"
                                                    *ngIf="(!flagJSON.smsBtnToggle)&&(flagJSON.notificationType=='Email')"
                                                    (click)="addNewEmailTemplate()">
                                            </aside>
                                        </div>
                                    </div>
                                </div>
                            </aside>

                        </div>
                    </div>
                </div>
            <!-- </aside> -->
        </div>

                    <div *ngIf="flagJSON.notificationType=='sendGrid'">
                        <div class="sms-form sms-popup-content">
                            <div class="sms-update">

                                <aside class="pull-left sms-grid-table">
                                    <div class="sms-top-section">
                                        <h3 style="margin-top: 15px;margin-bottom: 15px;">Template List</h3>
                                    </div>

                                    <div class="sms-middle-section">
                                        <div class="table table-responsive table-container table-data-overflow">
                                            <table>
                                                <tr>
                                                    <th>

                                                    </th>
                                                    <th style="width: 30%;">
                                                        <label>
                                                            <a class="cursor-icon" id="cursorAnch11">Template Name</a>
                                                        </label>
                                                    </th>
                                                    <th style="width: 30%;">
                                                        <label>
                                                            <a class="cursor-icon" id="cursorAnch12">Version Name</a>
                                                        </label>
                                                    </th>
                                                    <th style="width: 25%;">
                                                        <label>
                                                            <a class="cursor-icon" id="cursorAnch12">Updated Date</a>
                                                        </label>
                                                    </th>
                                                    <th style="width: 15%;">
                                                        <label>
                                                            <a class="cursor-icon" id="cursorAnch13">Preview</a>
                                                        </label>
                                                    </th>
                                                </tr>
                                                <tr id="row{{i}}" *ngFor="let row of emailGridData; let i = index;"
                                                    (click)="opEmailGridSelected(row,i)"
                                                    [class.selected]="i == selectedTableRow">
                                                    <td>
                                                        <!-- <div class="c-sm-1 c-md-1 c-lg-1"> -->
                                                        <!-- <div class="field-radio-wrapper"> -->
                                                        <input type="radio" name="bothRadio" [id]="'bothRadio-'+i"
                                                            class="form-radio" [value]="i"
                                                            [(ngModel)]="selectedTableRow">
                                                        <!-- <label [for]="'bothRadio-'+i">{{smsDetails.total_sms}}</label> -->
                                                        <!-- </div> -->
                                                        <!-- </div> -->
                                                    </td>
                                                    <td style="width: 30%;">
                                                        <span title="{{row.template_name}}">{{ (row.template_name.length > 20) ? (row.template_name | slice:0:20) + '...' : row.template_name
                              }}
                                                        </span>
                                                    </td>
                                                    <td style="width: 30%;">
                                                        <span title="{{row.version_name}}">{{ (row.version_name.length > 20) ? (row.version_name | slice:0:20) + '...' : row.version_name
                              }}
                                                        </span>
                                                    </td>
                                                    <td style="width: 25%;">
                                                        <span
                                                            title="{{row.template_updated_date}}">{{row.template_updated_date}}</span>
                                                    </td>
                                                    <td style="width: 15%;"
                                                        (click)="viewThumbnailUrl(row.template_subject_thumbnail_url)">
                                                        <a class="cursor">View</a>
                                                    </td>
                                                </tr>
                                                <tr *ngIf="emailGridData?.length==0">
                                                    <td colspan="5"
                                                        style="padding: 10px;text-align: center;font-weight: 600;">
                                                        No Data Found
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>

                                </aside>


                                <aside class="pull-right sms-grid-preview">
                                    <div class="sms-preview-footer" style="float: right;">
                                        <div class="">
                                            <div class="clearfix">
                                                <aside class="popup-btn">
                                                    <input type="button" value="Cancel" class="btn"
                                                        (click)="closeBulkSms()" id="Btncancel0">
                                                    <input type="button" value="Send" class="fullBlue btn"
                                                        (click)="sendEmailGrid()" id="btn0">
                                                </aside>
                                            </div>
                                        </div>
                                    </div>
                                </aside>

                            </div>
                        </div>
                    </div>

                </div>

            <!-- </div> -->
        <!-- </div> -->

    </section>


    <section class="absent_popup" *ngIf="viewPopUp">
        <div class="absent_student">
            <div class="header">
                <span style="font-weight: 600; cursor: pointer;" (click)="closeViewPopUp()">X</span>
            </div>
            <div class="main_container">
                <div class="for_absent">
                    <img [src]="EmailThumbnailUrl" class="emailGridImg">
                </div>
            </div>
        </div>
    </section>

    <div class="black-bg1" id="black-bg1" *ngIf="viewPopUp" (click)="closeViewPopUp()"></div>
    <!-- Download Summary Report Options PopUp Single-->
    <section id="" class="popupWrapper fadeIn" *ngIf="flagJSON.summaryOptions">
        <!-- -->

        <div class="popup pos-abs popup-body-container" style="max-width: 30% ;top: 14% !important;">
            <div class="popup-wrapper pos-rel">
                <span class="closePopup pos-abs fbold show" id="popupCloseBtn" (click)="closePopup()">
                    <svg class="artdeco-icon" focusable="false" height="24px" preserveAspectRatio="xMinYMin meet"
                        viewBox="0 0 24 24" width="24px" x="0" y="0">
                        <path class="large-icon"
                            d="M20,5.32L13.32,12,20,18.68,18.66,20,12,13.33,5.34,20,4,18.68,10.68,12,4,5.32,5.32,4,12,10.69,18.68,4Z"
                            style="fill: currentColor"></path>
                    </svg>
                </span>
                <div class="popup-content">
                    <h2>Download Summary Report</h2>
                    <div class="content-section">
                        <div class="download-report">
                            <div class="label-container">
                                <span>Download summary report for</span>
                            </div>
                            <div class="checkbox-container">
                                <div class="field-checkbox-wrapper">
                                    <input type="checkbox" value="" name="slotLabel"
                                        [(ngModel)]="downloadReportFor.enquiry" class="form-checkbox" id="enq-download">
                                    <label for="enq-download">Enquiry</label>
                                </div>
                                <div class="field-checkbox-wrapper">
                                    <input type="checkbox" value="" name="slotLabel"
                                        [(ngModel)]="downloadReportFor.admissions" class="form-checkbox"
                                        id="enq-admissions">
                                    <label for="enq-admissions">Admissions</label>
                                </div>
                                <div class="field-checkbox-wrapper">
                                    <input type="checkbox" value="" name="slotLabel"
                                        [(ngModel)]="downloadReportFor.fees" class="form-checkbox" id="enq-fees">
                                    <label for="enq-fees">Fees</label>
                                </div>
                            </div>
                        </div>
                        <div id="divDropDownSection" *ngIf="!flagJSON.showDateRange" class="row dropDownSection">
                            <div class="c-sm-6 c-lg-6 c-lg-6">
                                <div class="field-wrapper has-value">
                                    <label for="priorityEdit">Select Duration</label>
                                    <select id="month" class="form-ctrl" [(ngModel)]="varJson.downloadReportOption"
                                        name="priority">
                                        <option value="1">Select Month</option>
                                        <option value="2">This Month</option>
                                        <option value="3">Previous Month</option>
                                        <option value="4">Last Two Month</option>
                                    </select>
                                </div>
                            </div>
                            <div style="padding-top: 16px;" class="c-sm-6 c-lg-6 c-lg-6">
                                <button class="btn fullBlue" (click)="downloadSummaryReportXl()"
                                    style="margin-top: 10px" id="btnDownloadSummary">Download</button>
                            </div>
                        </div>
                        <div id="divRangeSelection" *ngIf="flagJSON.showDateRange" class="row select-dates"
                            style="margin:0 -15px">
                            <div class="c-sm-4 c-lg-4 c-lg-4">
                                <div class="field-wrapper datePickerBox">
                                    <label for="fromDate">From Date</label>
                                    <input type="text" value="" id="" class="form-ctrl bsDatepicker"
                                        [(ngModel)]="varJson.summaryReport.from_date" name="fromDate" readonly="true"
                                        bsDatepicker />


                                </div>
                            </div>
                            <div class="c-sm-4 c-lg-4 c-lg-4">
                                <div class="field-wrapper datePickerBox">
                                    <label for="toDate">To Date</label>
                                    <input type="text" value="" id="" class="form-ctrl bsDatepicker"
                                        [(ngModel)]="varJson.summaryReport.to_date" name="toDate" readonly="true"
                                        bsDatepicker />

                                </div>
                            </div>
                            <div class="c-sm-4 c-lg-4 c-lg-4" style="margin-top: 15px;">
                                <button class="btn fullBlue" (click)="downloadSummaryReportXlDateWise()"
                                    style="margin-top: 10px; padding: 5px" id="btnDownloadDatewise">Download</button>
                            </div>
                        </div>
                        <a id="anchTagToggle" class="pull-right" (click)="toggleDateSection()"
                            style="cursor: pointer;margin-top: 10px;">Download By Date Range</a>
                        <a id="downloadSummaryReport121" class="hide"></a>
                    </div>
                </div>


            </div>
        </div>

    </section>


</div>

<!-- Customizable Enquiry table -->
<preference-popup [settings]="tableSetting" [keys]="enquirySettings" (closeButton)="closePreferncesPopup($event)"
    *ngIf="flagJSON.showPreference"></preference-popup>