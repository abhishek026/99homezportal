<section class="middle-section clearFix" style="padding: 10px 10px;">
  <div class="heading-section" style="margin-top: -30px;">
    <h1>
      Class Schedule Details
    </h1>
  </div>
  <section class="cal-view">
    <aside class="boxPadding15">
      <!-- ==================================================================================== -->
      <!-- ==================================================================================== -->
      <!-- ========================== Header Section ========================================== -->
      <!-- ==================================================================================== -->
      <!-- ==================================================================================== -->
      <!-- ========================== Body Section ============================================ -->
      <section class="schedule-class-box">
        <!-- ==================================================================================== -->
        <!-- ==================================================================================== -->
        <!-- ========================== Search bar ============================================== -->
        <section class="common-search-filter" style="padding:5px 5px 10px 5px">
          <div class="filter-search">
            <div class="filter-box clearFix">
              <div class="row">
                <div class="c-lg-12 c-md-12 c-sm-12">
                  <div class="search-filter-wrapper" *ngIf="isProfessional">
                    <div class="row">
                      <div class="c-lg-3 c-md-3 c-sm-3">
                        <div class="field-wrapper"
                          [ngClass]="{'has-value': fetchMasterBatchModule.standard_id != '-1'}">
                          <label for="smc">Select Master course
                            <span class="text-danger">*</span>
                          </label>
                          <select id="smc" class="form-ctrl" [(ngModel)]="fetchMasterBatchModule.standard_id"
                            (ngModelChange)="updateSubjectList($event)">
                            <option value="-1">Select Master course</option>
                            <option [value]="std.standard_id" *ngFor="let  std of courseModelStdList">
                              {{std.standard_name}}
                            </option>
                          </select>

                        </div>
                      </div>
                      <div class="c-lg-3 c-md-3 c-sm-3">
                        <div class="field-wrapper" [ngClass]="{'has-value': fetchMasterBatchModule.subject_id != '-1'}">
                          <label for="sc">Select Course
                            <span class="text-danger">*</span>
                          </label>
                          <select id="sc" class="form-ctrl" [(ngModel)]="fetchMasterBatchModule.subject_id"
                            (ngModelChange)="filterSubjectBatches($event)">
                            <option value="-1">Select Course</option>
                            <option [value]="subject.subject_id" *ngFor="let subject of courseModelSubList">
                              {{subject.subject_name}}
                            </option>
                          </select>
                        </div>
                      </div>
                      <div class="c-lg-3 c-md-3 c-sm-3">
                        <div class="field-wrapper" [ngClass]="{'has-value': fetchMasterBatchModule.batch_id != '-1'}">
                          <label for="bn">Select Batch Name
                            <span class="text-danger">*</span>
                          </label>
                          <select id="bn" class="form-ctrl" [(ngModel)]="fetchMasterBatchModule.batch_id"
                            (ngModelChange)="batchUpdated($event)">
                            <option value="-1">Select Batch Name</option>
                            <option [value]="batch.batch_id" *ngFor="let batch of courseModelBatchList">
                              {{batch.batch_name}}
                            </option>
                          </select>

                        </div>
                      </div>
                      <div class="c-lg-1 c-md-1 c-sm-1" style="margin-top: 15px">
                        <button class="btn fullBlue" (click)="submitMasterBatch()">Go</button>
                      </div>
                    </div>
                    <div class="row" *ngIf="isClassFormFilled" style="margin-top:5px;margin-left:0px;font-size: 12px;">
                      <span>Batch Duration: </span>
                      <span style="font-weight: 600;">{{batchDetails?.batch_start_date}} - </span>
                      <span style="font-weight: 600;">{{batchDetails?.batch_end_date}}</span>
                    </div>
                  </div>
                  <div class="search-filter-wrapper" *ngIf="!isProfessional">
                    <div class="row">
                      <div class="c-lg-3 c-md-3 c-sm-3">
                        <div class="field-wrapper"
                          [ngClass]="{'has-value': fetchMasterCourseModule.master_course != '-1'}">
                          <!-- changes by Nalini - to handle school model conditions -->
                          <label for="smc">Select {{schoolModel ? 'Standard' : 'Master Course'}}
                            <span class="text-danger">*</span>
                          </label>
                          <select id="smc" class="form-ctrl" [(ngModel)]="fetchMasterCourseModule.master_course"
                            (ngModelChange)="updateCourseList($event)">
                             <!-- changes by Nalini - to handle school model conditions -->
                             <option value="-1">Select {{schoolModel ? 'Standard' : 'Master Course'}}</option>
                            <option [value]="master" *ngFor="let  master of masterCourse">
                              {{master}}
                            </option>
                          </select>

                        </div>
                      </div>
                      <div class="c-lg-3 c-md-3 c-sm-3">
                        <div class="field-wrapper" [ngClass]="{'has-value': fetchMasterCourseModule.course_id != '-1'}">
                          <label for="sc">Select {{schoolModel ? 'Section' : 'Course'}}
                            <span class="text-danger">*</span>
                          </label>
                          <select id="sc" class="form-ctrl" [(ngModel)]="fetchMasterCourseModule.course_id"
                            (ngModelChange)="onCourseListSelection($event)">
                            <option value="-1">Select {{schoolModel ? 'Section' : 'Course'}}</option>
                            <option [value]="course.course_id" *ngFor="let course of courseList">
                              {{course.course_name}}
                            </option>
                          </select>

                        </div>
                      </div>
                      <div class="c-lg-3 c-md-3 c-sm-3" *ngIf="!schoolModel">
                        <div class="field-wrapper  datePickerBox"
                          [ngClass]="{'has-value': (fetchMasterCourseModule.requested_date != 'Invalid date' && fetchMasterCourseModule.requested_date != '' )}">
                          <label for="csd">Class Schedule Date
                            <!--<span class="text-danger">*</span> -->
                          </label>
                          <input type="text" value="" id="csd" class="form-ctrl"
                            [(ngModel)]="fetchMasterCourseModule.requested_date" readonly="true" name="csd"
                            bsDatepicker>

                          <!-- <span class="date-clear" name="csdc" (click)="fetchMasterCourseModule.requested_date = ''">clear</span> -->
                        </div>
                      </div>
                      <div class="c-lg-3 c-md-3 c-sm-3" *ngIf="schoolModel">
                        <div class="field-wrapper" [ngClass]="{'has-value': fetchMasterCourseModule.selected_day != '-1'}">
                          <label for="sc">Select Day
                            <span class="text-danger">*</span>
                          </label>
                          <select id="sc" class="form-ctrl" [(ngModel)]="fetchMasterCourseModule.selected_day">
                            <option value="-1">Select Day</option>
                            <option [value]="course.data_key" *ngFor="let course of weekDaysListWithoutWeekend">
                              {{course.data_value}}
                            </option>
                          </select>

                        </div>
                      </div>
                      <div class="c-lg-3 c-md-3 c-sm-3">
                        <input type="button" class="fullBlue btn" style="margin-top:5%;" value="Go"
                          (click)="submitMasterCourse()" id="goInp8">
                      </div>
                    </div>
                    <div class="row" *ngIf="courseStartDate && !schoolModel" style="margin-top:5px;margin-left:0px;font-size: 12px;">
                      <span>Course Duration: </span>
                      <span style="font-weight: 600;">{{courseStartDate | date: 'dd-MMM-yyyy'}} - </span>
                      <span style="font-weight: 600;">{{courseEndDate | date: 'dd-MMM-yyyy'}}</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
        <!-- ==================================================================================== -->
        <!-- ==================================================================================== -->
        <!-- ========================== View Type List/Calendar ================================= -->
        <section class="schedule-class" *ngIf="isClassFormFilled">
          <div class="row">
            <div class="c-lg-7 c-sm-7 c-md-7 c-xs-12">
              <div class="schedule-class-left">
                <label>Schedule Class</label>
              </div>
            </div>
            <div class="c-lg-5 c-sm-5 c-md-5 c-xs-12 align-right">

              <button class="btn" *ngIf="hidePastClass() && !isProfessional && classScheduleArray.length > 0"
                (click)="sendReminder()" style="padding: 5px;">Send Reminder</button>

              <!-- <input type="button" value="Calendar View fullBlue" class="btn fullBlue">
                <input type="button" value="List View" class="btn "> -->
            </div>
          </div>
        </section>
        <!-- ==================================================================================== -->
        <!-- ==================================================================================== -->
        <!-- ========================== Account 5 Course Schedule ================================= -->
        <section class="" *ngIf="isClassFormFilled && !isProfessional">

          <div class="table-wrapper tableStyling">
            <div class="table-scroll-wrapper">
              <div class="table table-responsive classScheduleTable">
                <table class="table-main">
                  <thead>
                    <tr>
                      <th class="subj">
                        Subject
                        <span class="text-danger">*</span>
                      </th>
                      <th *ngIf="!schoolModel">
                        Topic
                        <!--<span class="text-danger">*</span> -->
                      </th>
                      <th>
                        Start Time
                        <span class="text-danger">*</span>
                      </th>
                      <th>
                        End Time
                        <span class="text-danger">*</span>
                      </th>
                      <th>
                        Select Teacher
                        <span class="text-danger">*</span>
                      </th>
                      <th class="desc" *ngIf="!schoolModel">
                        Description
                        <span title="Special characters not allowed in Description">

                          <!DOCTYPE svg
                            PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
                          <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                            xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="14px" height="14px"
                            viewBox="0 0 48 48" enable-background="new 0 0 48 48" xml:space="preserve">
                            <path fill="#1385F2" d="M24.067,0c-13.255,0-24,10.746-24,24s10.745,24,24,24c13.252,0,23.997-10.746,23.997-24S37.319,0,24.067,0z
	 M23.779,38.121c-1.035,0.802-2.029,1.208-2.991,1.208c-0.625,0-1.145-0.188-1.549-0.561c-0.402-0.374-0.603-0.847-0.603-1.421
	c0-0.581,0.188-1.524,0.573-2.845l3.017-10.371c0.482-1.688,0.72-2.752,0.72-3.193c0-0.327-0.117-0.597-0.362-0.818
	c-0.237-0.216,0.198-0.335-0.208-0.335c-0.345,0-0.376,0.088-1.376,0.263v-0.891l7.237-1.328L23.295,34.07
	c-0.308,1.091-0.645,1.746-0.645,1.96c0,0.246-0.025,0.443,0.123,0.595c0.144,0.158,0.261,0.232,0.449,0.232
	c0.251,0,0.509-0.123,0.817-0.374c0.874-0.688,1.756-1.671,2.663-2.96l0.79,0.547C26.439,35.663,25.195,37.016,23.779,38.121z
	 M28.818,12.606c-0.445,0.46-0.987,0.691-1.621,0.691c-0.636,0-1.175-0.231-1.637-0.691c-0.463-0.462-0.69-0.999-0.69-1.637
	c0-0.638,0.224-1.172,0.68-1.626c0.441-0.448,0.997-0.673,1.646-0.673c0.653,0,1.196,0.225,1.642,0.673
	c0.438,0.454,0.659,0.988,0.659,1.626C29.498,11.607,29.271,12.144,28.818,12.606z" />
                          </svg>

                        </span>
                      </th>
                      <th class="room">
                        Room No.
                      </th>
                      <th class="cl-type" *ngIf="!schoolModel">
                        Class Type
                      </th>
                      <th *ngIf="!schoolModel">
                        Repeat
                      </th>
                      <th>

                      </th>
                    </tr>
                  </thead>

                  <tbody>

                    <tr class="adder">

                      <td class="subj">
                        <div class="form-wrapper"
                          [ngClass]="{'has-value' : addClassDetails.subject_id != '-1' && addClassDetails.subject_id != '' }">
                          <select id="subjectSelctionDDN" class="side-form-ctrl" name="row.subject_id"
                            [(ngModel)]="addClassDetails.subject_id" (ngModelChange)="onSubjectSelection($event)">
                            <option value="-1"> </option>
                            <option *ngFor="let opt of subjectListDataSource" [value]="opt.subject_id">
                              {{opt.subject_name}}
                            </option>
                          </select>
                        </div>
                      </td>

                      <td class="topic" *ngIf="!schoolModel">
                        <div class="form-wrapper" *ngIf="addLinkStatus==''"
                          [ngClass]="{'has-value' : addClassDetails.class_desc != '' && addClassDetails.class_desc != null }">
                          <input type="textbox" class="side-form-ctrl topic-link" name="label" style="height: 31px;"
                            id="classDetailsTxt9" placeholder="Link" readonly (click)="topicListing()">
                          <i class="fa fa-link" aria-hidden="true" (click)="topicListing  ()"
                            style="cursor: pointer;color: #bdbdbd;font-size: 15px;position: absolute; top: 10px; right: 15px;"></i>
                        </div>
                        <div class="form-wrapper" *ngIf="addLinkStatus=='linked'">
                          <input type="textbox" class="side-form-ctrl topic-linked" name="label" style="height: 31px;"
                            id="classDetailsTxt9" placeholder="Linked" readonly (click)="topicListing()">
                          <i class="fa fa-link" aria-hidden="true" (click)="topicListing()"
                            style="cursor: pointer;color: #1283f4;font-size: 15px;position: absolute; top: 10px; right: 15px;"></i>
                        </div>
                      </td>

                      <td class="">
                        <div class="timePickerParent">
                          <div class="form-wrapper">
                            <select id="followuptime" class="side-form-ctrl field-wrapper hourTime"
                              [(ngModel)]="addClassDetails.start_hour" name="followuptime">
                              <option [value]="time" *ngFor="let time of times">
                                {{time}}
                              </option>
                            </select>
                          </div>
                          <div class="form-wrapper">
                            <select id="minute" class="side-form-ctrl fields-wrapper minuteTime"
                              [(ngModel)]="addClassDetails.start_minute" name="minute">
                              <option *ngFor="let minute of minArr" [value]="minute">
                                {{minute}}
                              </option>
                            </select>
                          </div>
                        </div>
                      </td>

                      <td class="">
                        <div class="timePickerParent">
                          <div class="form-wrapper">
                            <select id="followuptime" class="side-form-ctrl field-wrapper hourTime"
                              [(ngModel)]="addClassDetails.end_hour" name="followuptime">
                              <option [value]="time" *ngFor="let time of times">
                                {{time}}
                              </option>
                            </select>
                          </div>
                          <div class="form-wrapper">
                            <select id="minute" class="side-form-ctrl fields-wrapper minuteTime"
                              [(ngModel)]="addClassDetails.end_minute" name="minute">
                              <option *ngFor="let minute of minArr" [value]="minute">
                                {{minute}}
                              </option>
                            </select>
                          </div>
                        </div>
                      </td>


                      <td>
                        <div class="form-wrapper"
                          [ngClass]="{'has-value' : addClassDetails.teacher_id != '-1' && addClassDetails.teacher_id != '' }">
                          <select id="" class="side-form-ctrl viewClass" name="row.category_id"
                            [(ngModel)]="addClassDetails.teacher_id" disabled="{{userType==3}}">
                            <option value="-1"></option>
                            <option *ngFor="let opt of teacherListDataSource" [value]="opt.teacher_id">
                              {{opt.teacher_name}}
                            </option>
                          </select>
                        </div>
                      </td>

                      <td class="desc" *ngIf="!schoolModel">
                        <div class="form-wrapper"
                          [ngClass]="{'has-value' : addClassDetails.class_desc != '' && addClassDetails.class_desc != null }">
                          <input type="textbox" class="side-form-ctrl viewClass" name="label"
                            [(ngModel)]="addClassDetails.class_desc" style="height: 31px;" id="classDetailsTxt9">
                        </div>
                      </td>

                      <td class="room">
                        <div class="form-wrapper"
                          [ngClass]="{'has-value' : addClassDetails.room_no != '' && addClassDetails.room_no != null }">
                          <input type="text" class="side-form-ctrl viewClass" name="label"
                            [(ngModel)]="addClassDetails.room_no" style="height: 31px;" id="addClassInp9">
                        </div>
                      </td>

                      <td class="cl-type" *ngIf="!schoolModel">
                        <div class="form-wrapper"
                          [ngClass]="{'has-value' : addClassDetails.custom_class_type != '-1' && addClassDetails.custom_class_type != '' }">
                          <select id="" class="side-form-ctrl" name="row.category_id"
                            [(ngModel)]="addClassDetails.custom_class_type" style="background: transparent;">
                            <option *ngFor="let opt of customListDataSource">
                              {{opt}}
                            </option>
                          </select>
                        </div>
                      </td>

                      <!-- Recurrence to be empty by default -->
                      <td>
                      </td>

                      <td>
                        <button class="btn" (click)="addClassSchedule()" id="addAnch10" value="Add">Add
                          <!-- <a id="addAnch10">Add</a> -->
                        </button>
                      </td>

                    </tr>

                    <tr id="row{{i}}" *ngFor="let row of classScheduleArray; let i= index ; trackBy : index">
                      <td class="subj">
                        {{row.subject_name}}
                      </td>
                      <td class="topic" *ngIf="row.topics_covered!='0' && row.topics_covered!='' && !schoolModel">
                        <div class="form-wrapper">
                          <input type="textbox" class="side-form-ctrl topic-linked" name="label" style="height: 31px;"
                            id="classDetailsTxt9" placeholder="Linked" readonly
                            (click)="topicListingForAlreadyLinkedTopics(row, row.subject_id, row.topics_covered)">
                          <i class="fa fa-link" aria-hidden="true"
                            (click)="topicListingForAlreadyLinkedTopics(row, row.subject_id, row.topics_covered)"
                            style="cursor: pointer;color: #1283f4;font-size: 15px;position: absolute; top: 10px; right: 15px;"></i>
                        </div>
                      </td>
                      <td class="topic" *ngIf="((row.topics_covered=='')||(row.topics_covered=='0')) && !schoolModel">
                        <div class="form-wrapper">
                          <input type="textbox" class="side-form-ctrl topic-link" name="label" style="height: 31px;"
                            id="classDetailsTxt9" placeholder="Link" readonly
                            (click)="topicListingForAlreadyLinkedTopics(row, row.subject_id, row.topics_covered)">
                          <i class="fa fa-link" aria-hidden="true"
                            (click)="topicListingForAlreadyLinkedTopics(row, row.subject_id, row.topics_covered)"
                            style="cursor: pointer;color: #bdbdbd;font-size: 15px;position: absolute; top: 10px; right: 15px;"></i>
                        </div>
                      </td>
                      <td>
                        {{row.start_time}}
                      </td>
                      <td>
                        {{row.end_time}}
                      </td>
                      <td>
                        <div class="form-wrapper">
                          <select id="" class="side-form-ctrl" name="row.category_id" style="background: transparent"
                            [(ngModel)]="row.teacher_id" disabled="{{userType==3}}">
                            <option value="-1"></option>
                            <option *ngFor="let opt of teacherListDataSource" [value]="opt.teacher_id">
                              {{opt.teacher_name}}
                            </option>
                          </select>
                        </div>
                      </td>
                      <td class="desc" *ngIf="!schoolModel">
                        <div class="form-wrapper">
                          <input type="text" class="side-form-ctrl editCellInput" style="background: transparent"
                            [(ngModel)]="row.class_desc" name="label" id="rowInp1">
                        </div>
                      </td>
                      <td class="room">
                        <div class="form-wrapper">
                          <input type="text" class="side-form-ctrl editCellInput" style="background: transparent"
                            [(ngModel)]="row.room_no" name="label" id="rowInp2">
                        </div>
                      </td>

                      <td class="cl-type" *ngIf="!schoolModel">
                        <div class="form-wrapper">
                          <select id="" class="side-form-ctrl" name="row.category_id" style="background: transparent"
                            [(ngModel)]="row.custom_class_type">
                            <option *ngFor="let opt of customListDataSource" [value]="opt">
                              {{opt}}
                            </option>
                          </select>
                        </div>
                      </td>

                      <td *ngIf="!schoolModel">
                        <div class="form-wrapper">
                          <select *ngIf="(row.class_schedule_id != 0)" id="" style="background: transparent"
                            class="side-form-ctrl" name="row.category_id" (change)="weeklyScheduleChange($event , row)">
                            <option value="1">Does Not Repeat</option>
                            <option value="2">Select Dates</option>
                            <option value="3">Custom</option>
                          </select>
                        </div>
                      </td>
                      <td>
                        <div class="action-box">
                          <span *ngIf="row.class_schedule_id != 0 && row.is_attendance_marked == 'N'"
                            class="reschedule-icon" title="Cancel Class" (click)="cancelCourseClicked(row)"> X </span>
                          <span *ngIf="row.class_schedule_id == 0" (click)="removeRowFromSchedule(i , row)"
                            title="Delete" class="delete-btn">
                            <i class="fa fa-trash-o" style="font-family: FontAwesome;" aria-hidden="true"></i>
                          </span>
                          <!-- <span class="edit-icon"></span> -->
                        </div>
                      </td>
                    </tr>

                  </tbody>

                  <tbody *ngIf="classScheduleArray.length ==0">
                    <tr>
                      <td colspan="10">
                        No Schedule For Current Date Found
                      </td>
                    </tr>
                  </tbody>

                </table>
              </div>
            </div>
          </div>

          <div class="extraMargin row" style="margin-right: 15px; margin-bottom:10px;">
            <div class="pull-left">
              <button type="button" class="btn" style="margin-left: 0px;" name="button"
                routerLink="/view/course/coursePlanner/class" *ngIf="coursePlannerStatus=='true'">Back</button>
            </div>
            <div class="pull-right">
              <button class="btn" (click)="saveCourseSchedule()" id="btnSaveBtn">Save</button>
              <button class="btn" routerLink="/view/course/create/class/home" id="BtnCancelBtn">Cancel</button>

            </div>
          </div>
        </section>

        <!-- ==================================================================================== -->
        <!-- ========================== Account 4 Batch Schedule ================================= -->
        <section class="batch-schedule" *ngIf="isClassFormFilled && isProfessional">

          <div class="filter-Section">
            <div class="row">
              <div class="c-lg-4 c-md-4 c-sm-4">
                <select class="side-form-ctrl" name="row.category_id" (ngModelChange)="scheduleSelection($event)"
                  [(ngModel)]="batchFrequency">
                  <option value="1">Weekly</option>
                  <option value="2">Custom</option>
                </select>
              </div>
            </div>
          </div>

          <div class="weekly-Schedule" *ngIf="batchFrequency == '1'">

            <div class="weeklyDiv">

              <div class="row weeklyAdd">
                <div class="c-lg-3 c-md-3 c-sm-3">
                  <div class="field-wrapper datePickerBox" style="padding: 0px;"
                    [ngClass]="{'has-value': custom.date!=''}">
                    <label for="csd">Schedule Date
                      <span class="text-danger">*</span>
                    </label>
                    <input type="text" value="" id="csd" class="form-ctrl bsDatepicker" [(ngModel)]="custom.date"
                      readonly="true" name="csd" bsDatepicker>
                  </div>
                </div>

                <div class="c-sm-2 c-md-2 c-lg-2">
                  <div class="form-wrapper timepick">
                    <label for="startTime">Start Time</label>
                    <div class="tbox">
                      <div class="times">
                        <select id="" class="mins side-form-ctrl" [(ngModel)]="mainStartTime.hour" name="startTime">
                          <option [value]="time" *ngFor="let time of times">
                            {{time}}
                          </option>
                        </select>
                      </div>
                      <div class="times">
                        <select id="" class="mers side-form-ctrl" [(ngModel)]="mainStartTime.minute" name="minute">
                          <option *ngFor="let minute of minArr" [value]="minute">
                            {{minute}}
                          </option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="c-sm-2 c-md-2 c-lg-2">
                  <div class="form-wrapper timepick">
                    <label for="startTime">End Time</label>
                    <div class="tbox">
                      <div class="times">
                        <select id="" class="mins side-form-ctrl" [(ngModel)]="mainEndTime.hour" name="startTime">
                          <option [value]="time" *ngFor="let time of times">
                            {{time}}
                          </option>
                        </select>
                      </div>
                      <div class="times">
                        <select id="" class="mers side-form-ctrl" [(ngModel)]="mainEndTime.minute" name="minute">
                          <option *ngFor="let minute of minArr" [value]="minute">
                            {{minute}}
                          </option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="pull-right btnGroup">
                  <button class="btn" (click)="applyButtonClick()">Apply</button>
                  <button class="btn" *ngIf="showCancelWeeklyBtn" (click)="cancelWeeklyScheduledClass()">Cancel
                    Weekly Scheduled Class</button>
                </div>
              </div>

              <div class="table-scroll-wrapper">
                <div class="table-responsive ">
                  <table>
                    <thead>
                      <tr>
                        <th>
                          Week Days
                        </th>
                        <th>
                          Start Time
                        </th>
                        <th>
                          End Time
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let row of weekDaysTable; let i=index ; trackBy : index ">
                        <td>
                          <div class="field-checkbox-wrapper">

                            <input type="checkbox" name="chk" name="checkbx" id="checkbx{{i}}"
                              [(ngModel)]="row.uiSelected" class="form-checkbox">
                            <label for="checkbx{{i}}">
                              {{row.data_value}}
                            </label>
                          </div>
                        </td>
                        <td>
                          <div class="form-wrapper timepick">
                            <div class="tbox">
                              <div class="times">
                                <select id="" class="mins side-form-ctrl" [(ngModel)]="row.start_time.hour"
                                  name="startTime">
                                  <option [value]="time" *ngFor="let time of times">
                                    {{time}}
                                  </option>
                                </select>
                              </div>
                              <div class="times">
                                <select id="" class="mers side-form-ctrl" [(ngModel)]="row.start_time.minute"
                                  name="minute">
                                  <option *ngFor="let minute of minArr" [value]="minute">
                                    {{minute}}
                                  </option>
                                </select>
                              </div>
                            </div>
                          </div>
                        </td>
                        <td>
                          <div class="form-wrapper timepick">
                            <div class="tbox">
                              <div class="times">
                                <select id="" class="mins side-form-ctrl" [(ngModel)]="row.end_time.hour"
                                  name="startTime">
                                  <option [value]="time" *ngFor="let time of times">
                                    {{time}}
                                  </option>
                                </select>
                              </div>
                              <div class="times">
                                <select id="" class="mers side-form-ctrl" [(ngModel)]="row.end_time.minute"
                                  name="minute">
                                  <option *ngFor="let minute of minArr" [value]="minute">
                                    {{minute}}
                                  </option>
                                </select>
                              </div>
                            </div>
                          </div>
                        </td>
                      </tr>
                      <tr *ngIf="weekDaysTable.length == 0">
                        <td colspan="3" style="text-align: center">
                          No Schedule Of Week Found
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <div class="row btn-table" style="margin: 10px 0px;">
                <div class="pull-left">
                  <button type="button" class="btn" style="margin-left: 0px;" name="button"
                    routerLink="/view/course/coursePlanner/class" *ngIf="coursePlannerStatus=='true'">Back </button>
                </div>
                <div class="pull-right">
                  <button class="btn fullBlue " [disabled]="auth.isRippleLoad.getValue()"
                    (click)="updateWeeklySchedule()">Update </button>
                </div>
              </div>

            </div>

          </div>

          <div class="custom-Schedule" *ngIf="batchFrequency == '2'">

            <div class="row adderCustom">
              <div class="c-lg-3 c-md-3 c-sm-3">
                <div class="field-wrapper datePickerBox" [ngClass]="{'has-value': custom.date!=''}">
                  <label for="csd">Date
                    <span class="text-danger">*</span>
                  </label>
                  <input type="text" value="" id="csd" class="form-ctrl bsDatepicker" [(ngModel)]="custom.date"
                    readonly="true" name="csd" bsDatepicker>

                </div>
              </div>
              <div class="c-lg-2 c-md-2 c-sm-2" style="margin-top: 10px;padding: 0;width: 10%;">
                <label>
                  <span class="topic-lbl">Topic</span></label><br>
                <div class="form-wrapper" style="margin:0px !important;border:1px solid #0084f6"
                  *ngIf="selectedTopicsListObj.length">
                  <input type="textbox" class="side-form-ctrl topic-link" name="label"
                    style="height: 30px;color:#0084f6" id="classDetailsTxt9" placeholder="Linked" readonly
                    (click)="fetchSelectedTopics()">
                  <i class="fa fa-link" aria-hidden="true" (click)="fetchSelectedTopics()"
                    style="cursor: pointer;color: #bdbdbd;font-size: 15px;position: absolute; top: 8px; right: 15px;color: #0084f6"></i>
                </div>
                <div class="form-wrapper" style="margin:0px !important;border:1px solid rgba(119, 119, 119, 0);"
                  *ngIf="!selectedTopicsListObj.length">
                  <input type="textbox" class="side-form-ctrl topic-link" name="label" style="height: 30px;"
                    id="classDetailsTxt9" placeholder="Link" readonly (click)="fetchTopics()">
                  <i class="fa fa-link" aria-hidden="true" (click)="fetchTopics()"
                    style="cursor: pointer;color: #bdbdbd;font-size: 15px;position: absolute; top: 8px; right: 15px;"></i>
                </div>
              </div>

              <div class="c-sm-2 c-md-2 c-lg-2" style="margin-top: 10px">
                <div class="form-wrapper timepick">
                  <label for="startTime">Start Time</label>
                  <div class="tbox">
                    <div class="times">
                      <select id="" class="mins side-form-ctrl" [(ngModel)]="custom.start_hour" name="startTime">
                        <option [value]="time" *ngFor="let time of times">
                          {{time}}
                        </option>
                      </select>
                    </div>
                    <div class="times">
                      <select id="" class="mers side-form-ctrl" [(ngModel)]="custom.start_minute" name="minute">
                        <option *ngFor="let minute of minArr" [value]="minute">
                          {{minute}}
                        </option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>

              <div class="c-sm-2 c-md-2 c-lg-2" style="margin-top: 10px">
                <div class="form-wrapper timepick">
                  <label for="startTime">End Time</label>
                  <div class="tbox">
                    <div class="times">
                      <select id="" class="mins side-form-ctrl" [(ngModel)]="custom.end_hour" name="startTime">
                        <option [value]="time" *ngFor="let time of times">
                          {{time}}
                        </option>
                      </select>
                    </div>
                    <div class="times">
                      <select id="" class="mers side-form-ctrl" [(ngModel)]="custom.end_minute" name="minute">
                        <option *ngFor="let minute of minArr" [value]="minute">
                          {{minute}}
                        </option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>

              <div class="c-lg-3 c-md-3 c-sm-3">
                <div class="field-wrapper" [ngClass]="{'has-value' : custom.desc != ''}">
                  <label for="customDescTxt">Description
                    <span title="Special characters not allowed in Description">

                      <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
                      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                        xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="14px" height="14px"
                        viewBox="0 0 48 48" enable-background="new 0 0 48 48" xml:space="preserve">
                        <path fill="#1385F2" d="M24.067,0c-13.255,0-24,10.746-24,24s10.745,24,24,24c13.252,0,23.997-10.746,23.997-24S37.319,0,24.067,0z
M23.779,38.121c-1.035,0.802-2.029,1.208-2.991,1.208c-0.625,0-1.145-0.188-1.549-0.561c-0.402-0.374-0.603-0.847-0.603-1.421
c0-0.581,0.188-1.524,0.573-2.845l3.017-10.371c0.482-1.688,0.72-2.752,0.72-3.193c0-0.327-0.117-0.597-0.362-0.818
c-0.237-0.216,0.198-0.335-0.208-0.335c-0.345,0-0.376,0.088-1.376,0.263v-0.891l7.237-1.328L23.295,34.07
c-0.308,1.091-0.645,1.746-0.645,1.96c0,0.246-0.025,0.443,0.123,0.595c0.144,0.158,0.261,0.232,0.449,0.232
c0.251,0,0.509-0.123,0.817-0.374c0.874-0.688,1.756-1.671,2.663-2.96l0.79,0.547C26.439,35.663,25.195,37.016,23.779,38.121z
M28.818,12.606c-0.445,0.46-0.987,0.691-1.621,0.691c-0.636,0-1.175-0.231-1.637-0.691c-0.463-0.462-0.69-0.999-0.69-1.637
c0-0.638,0.224-1.172,0.68-1.626c0.441-0.448,0.997-0.673,1.646-0.673c0.653,0,1.196,0.225,1.642,0.673
c0.438,0.454,0.659,0.988,0.659,1.626C29.498,11.607,29.271,12.144,28.818,12.606z" />
                      </svg>

                    </span>
                  </label>
                  <textarea class="form-ctrl" [(ngModel)]="custom.desc" id="customDescTxt"
                    name="customDescTxt"></textarea>

                </div>
              </div>

              <div class="" style="margin-top: 25px">
                <button class="btn" (click)="addNewCustomClass()">Add</button>
              </div>
            </div>

            <div class="table-scroll-wrapper">
              <div class="table-responsive">
                <table>
                  <thead>
                    <tr>
                      <th>
                        Date
                      </th>
                      <th>
                        Topics
                      </th>
                      <th>
                        Start Time
                      </th>
                      <th>
                        End Time
                      </th>
                      <th>
                        Class Description
                      </th>
                      <th>
                        Action
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let row of customTable; let i=index ; trackBy : index">
                      <td>
                        {{row.class_date}}
                      </td>
                      <td>

                        <input type="textbox" class="side-form-ctrl topic-link"
                          *ngIf="row.topics_covered != '' && row.topics_covered != null" name="label"
                          style="height: 30px;border:1px solid blue;text-align:center;cursor:pointer"
                          id="classDetailsTxt9" placeholder="Linked" readonly (click)="editTopics(row)" />
                        <i class="fa fa-link" (click)="editTopics(row)"
                          *ngIf="row.topics_covered != '' && row.topics_covered != null"
                          style="cursor: pointer;font-size: 15px;margin-left: -30px;margin-top:6px;color:#0084f6"></i>

                        <input type="textbox" class="side-form-ctrl topic-link"
                          *ngIf="row.topics_covered == '' || row.topics_covered == null" name="label"
                          style="height: 30px;cursor:pointer;text-align:center;border:1px solid lightgrey"
                          id="classDetailsTxt9" placeholder="Link" readonly (click)="editTopics(row)" />
                        <i class="fa fa-link" (click)="editTopics(row)"
                          *ngIf="row.topics_covered == '' || row.topics_covered == null"
                          style="cursor: pointer;color: #bdbdbd;font-size: 15px;margin-left: -30px;margin-top:6px"></i>

                      </td>
                      <td>
                        {{row.start_time}}
                      </td>
                      <td>
                        {{row.end_time}}
                      </td>
                      <td>
                        {{row.note}}
                      </td>
                      <td>
                        <a *ngIf="row.schd_id == 0" style="cursor:pointer; margin-right: 5px" (click)="deleteFromCustomTable(row , i)"
                          id="deleteAnch1">Delete</a>
                        <a style="cursor:pointer; margin-right: 5px"
                          *ngIf="row.schd_id !='0' && row.is_attendance_marked=='N' && checkNotifyDate(row)"
                          (click)="notifyOfCustomClass(row , index)" id="notifyAnch2"> Notify</a>
                        <a style="cursor:pointer;" *ngIf="row.schd_id !='0' && row.is_attendance_marked=='N'"
                          (click)="cancelClassOfCustomClass(row , index)" id="cancelAnch3">Cancel Class</a>
                      </td>
                    </tr>
                    <tr *ngIf="customTable.length == 0">
                      <td colspan="5">
                        No Custom Schedule Found
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <div class="row" style="margin: 10px 0px;">
              <div class="pull-left">
                <button type="button" class="btn" style="margin-left: 0px;" name="button"
                  routerLink="/view/course/coursePlanner/class" *ngIf="coursePlannerStatus=='true'">Back</button>
              </div>
              <div class="pull-right">
                <button class="btn fullBlue" style="margin-right: 15px" [disabled]="auth.isRippleLoad.getValue()"
                  (click)="updateCustomClass()"> Update</button>
              </div>
            </div>

          </div>

          <div class="common-section">

            <div class="divExtraClass" *ngIf="batchFrequency == '1'">

              <h4>Extra Class</h4>

              <div class="row adder-Row">

                <div class="c-lg-3 c-md-3 c-sm-3">
                  <div class="field-wrapper datePickerBox has-value">
                    <label for="csd">Date
                      <span class="text-danger">*</span>
                    </label>
                    <input type="text" value="" id="csd" class="form-ctrl bsDatepicker" [(ngModel)]="addExtraClass.date"
                      readonly="true" name="csd" bsDatepicker>

                  </div>
                </div>
                <div class="c-lg-2 c-md-2 c-sm-2" style="margin-top: 10px;padding: 0;width: 10%;">
                  <label>
                    <span class="topic-lbl">Topic</span></label><br>
                  <div class="form-wrapper" style="margin:0px !important;border:1px solid #0084f6"
                    *ngIf="selectedTopicsListObj.length">
                    <input type="textbox" class="side-form-ctrl topic-link" name="label"
                      style="height: 30px;color:#0084f6" id="classDetailsTxt9" placeholder="Linked" readonly
                      (click)="fetchSelectedTopics()">
                    <i class="fa fa-link" aria-hidden="true" (click)="fetchSelectedTopics()"
                      style="cursor: pointer;color: #bdbdbd;font-size: 15px;position: absolute; top: 8px; right: 15px;color: #0084f6"></i>
                  </div>
                  <div class="form-wrapper" style="margin:0px !important;border:1px solid rgba(119, 119, 119, 0);"
                    *ngIf="!selectedTopicsListObj.length">
                    <input type="textbox" class="side-form-ctrl topic-link" name="label" style="height: 30px;"
                      id="classDetailsTxt9" placeholder="Link" readonly (click)="fetchTopics()">
                    <i class="fa fa-link" aria-hidden="true" (click)="fetchTopics()"
                      style="cursor: pointer;color: #bdbdbd;font-size: 15px;position: absolute; top: 8px; right: 15px;"></i>
                  </div>
                </div>

                <div class="c-sm-2 c-md-2 c-lg-2" style="margin-top: 10px">
                  <div class="form-wrapper timepick">
                    <label for="startTime">Start Time</label>
                    <div class="tbox">
                      <div class="times">
                        <select id="" class="mins side-form-ctrl" [(ngModel)]="addExtraClass.start_hour"
                          name="startTime">
                          <option [value]="time" *ngFor="let time of times">
                            {{time}}
                          </option>
                        </select>
                      </div>
                      <div class="times">
                        <select id="" class="mers side-form-ctrl" [(ngModel)]="addExtraClass.start_minute"
                          name="minute">
                          <option *ngFor="let minute of minArr" [value]="minute">
                            {{minute}}
                          </option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="c-sm-2 c-md-2 c-lg-2" style="margin-top: 10px">
                  <div class="form-wrapper timepick">
                    <label for="startTime">End Time</label>
                    <div class="tbox">
                      <div class="times">
                        <select id="" class="mins side-form-ctrl" [(ngModel)]="addExtraClass.end_hour" name="startTime">
                          <option [value]="time" *ngFor="let time of times">
                            {{time}}
                          </option>
                        </select>
                      </div>
                      <div class="times">
                        <select id="" class="mers side-form-ctrl" [(ngModel)]="addExtraClass.end_minute" name="minute">
                          <option *ngFor="let minute of minArr" [value]="minute">
                            {{minute}}
                          </option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="c-lg-3 c-md-3 c-sm-3">
                  <div class="field-wrapper" [ngClass]="{'has-value':addExtraClass.desc != ''}">
                    <label for="divDesc">Class Description</label>
                    <textarea class="form-ctrl textBox" id="divDesc" name="desc"
                      [(ngModel)]="addExtraClass.desc"></textarea>

                  </div>
                </div>

                <div style="padding-top: 25px">
                  <button class="btn" (click)="addNewExtraClass()">Add</button>
                </div>

              </div>

              <div class="extraClass">
                <div class="table-scroll-wrapper">
                  <div class="table-responsive">
                    <table>
                      <thead>
                        <tr>
                          <th>
                            Date
                          </th>
                          <th>
                            Topics
                          </th>
                          <th>
                            Start Time
                          </th>
                          <th>
                            End Time
                          </th>
                          <th>
                            Class Description
                          </th>
                          <th>
                            Action
                          </th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let row of extraClassTable; let i=index ; trackBy : index">
                          <td>
                            {{row.class_date}}
                          </td>
                          <td>

                            <input type="textbox" class="side-form-ctrl topic-link"
                              *ngIf="row.topics_covered != '' && row.topics_covered != null" name="label"
                              style="height: 30px;border:1px solid blue;text-align:center;cursor:pointer"
                              id="classDetailsTxt9" placeholder="Linked" readonly (click)="editTopics(row)" />
                            <i class="fa fa-link" (click)="editTopics(row)"
                              *ngIf="row.topics_covered != '' && row.topics_covered != null"
                              style="cursor: pointer;font-size: 15px;margin-left: -30px;margin-top:6px;color:#0084f6"></i>

                            <input type="textbox" class="side-form-ctrl topic-link"
                              *ngIf="row.topics_covered == '' || row.topics_covered == null" name="label"
                              style="height: 30px;cursor:pointer;text-align:center;border:1px solid lightgrey"
                              id="classDetailsTxt9" placeholder="Link" readonly (click)="editTopics(row)" />
                            <i class="fa fa-link" (click)="editTopics(row)"
                              *ngIf="row.topics_covered == '' || row.topics_covered == null"
                              style="cursor: pointer;color: #bdbdbd;font-size: 15px;margin-left: -30px;margin-top:6px"></i>

                          </td>
                          <td>
                            {{row.start_time}}
                          </td>
                          <td>
                            {{row.end_time}}
                          </td>
                          <td>
                            {{row.note}}
                          </td>
                          <td>
                            <a style="cursor:pointer;margin-right: 5px"
                              *ngIf="row.schd_id != '0' && row.is_attendance_marked=='N'"
                              (click)="cancelExtraClassSchedule(row)" id="cancelAnch4">Cancel</a>
                            <a style="cursor:pointer;margin-right: 5px"
                              *ngIf="row.schd_id != '0' && row.is_attendance_marked=='N'"
                              (click)="notifyExtraClassSchedule(row)" id="notifyAnch5"> Notify</a>
                            <a *ngIf="checkCurrentDate(row,row.class_date) || row.schd_id == '0'" style="cursor:pointer"
                              (click)="deleteExtraClassSchedule(row , i)" id="deleteAnch6">Delete</a>
                          </td>
                        </tr>
                        <tr *ngIf="extraClassTable.length == 0">
                          <td colspan="5" style="text-align: center">
                            No Extra Class Schedule Found
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>

              <div class="row btn-table">
                <button class="btn fullBlue pull-right" style="margin-right: 10px"
                  [disabled]="auth.isRippleLoad.getValue()" (click)="updateExtraClass()">Update</button>
              </div>

            </div>

            <div class="divCancelClass">
              <h4>Cancelled Class</h4>

              <div class="table-scroll-wrapper cancelTable">
                <div class="table table-responsive">
                  <table>
                    <thead>
                      <tr>
                        <th>
                          Date
                        </th>
                        <th>
                          Start Time
                        </th>
                        <th>
                          End Time
                        </th>
                        <th>
                          Cancel Reason
                        </th>
                        <th>
                          Action
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let row of canceLClassTable; let i=index ; trackBy : index">
                        <td>
                          {{row.class_date}}
                        </td>
                        <td>
                          {{row.start_time}}
                        </td>
                        <td>
                          {{row.end_time}}
                        </td>
                        <td>
                          {{row.cancel_note}}
                        </td>
                        <td>
                          <!-- <a style="cursor:pointer;margin-right: 5px" (click)="notifyOfCancelClass(row)" id="notifyAnch7"> Notify</a> -->
                          <span>Last Notified</span> {{row.last_notify_sent_time}}
                        </td>
                      </tr>
                      <tr *ngIf="canceLClassTable.length == 0">
                        <td colspan="5" style="text-align: center">
                          No Cancelled Class Schedule Found
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>

            </div>

          </div>


        </section>


      </section>
      <!-- ==================================================================================== -->
      <!-- ==================================================================================== -->
    </aside>
  </section>
</section>



<!-- //////////////////////////////////POPUP///////////////////////////////// -->
<!-- //////////////////////////////////POPUP///////////////////////////////// -->
<!-- //////////////////////////////////POPUP///////////////////////////////// -->
<!-- //////////////////////////////////POPUP///////////////////////////////// -->
<!-- //////////////////////////////////POPUP///////////////////////////////// -->

<section id="popup" class="popupWrapper fadeIn" *ngIf="showPopUpRecurence">
  <div class="popup pos-abs popup-body-container">
    <div class="popup-wrapper pos-rel">
      <span class="closePopup pos-abs fbold show" id="popupCloseBtn" (click)="closePopup()">
        <svg class="artdeco-icon" focusable="false" height="24px" preserveAspectRatio="xMinYMin meet"
          viewBox="0 0 24 24" width="24px" x="0" y="0">
          <path class="large-icon"
            d="M20,5.32L13.32,12,20,18.68,18.66,20,12,13.33,5.34,20,4,18.68,10.68,12,4,5.32,5.32,4,12,10.69,18.68,4Z"
            style="fill: currentColor"></path>
        </svg>
      </span>
      <div class="popup-content">
        <h2 style="margin-left: 10px">Custom Recurrence for class {{selctedScheduledClass.subject_name}}</h2>

        <div class="row extraMargin">
          <div class="c-sm-3 c-md-3 c-lg-3">
            <div class="form-wrapper timepick">
              <label for="startTime">Start Time</label>
              <div class="tbox">
                <div class="times ">
                  <select id="" class="mins side-form-ctrl" [(ngModel)]="weeklyCommonStartTime.hour" name="startTime">
                    <option [value]="time" *ngFor="let time of times">
                      {{time}}
                    </option>
                  </select>
                </div>
                <div class="times">
                  <select id="" class="mers side-form-ctrl" [(ngModel)]="weeklyCommonStartTime.minute" name="minute">
                    <option *ngFor="let minute of minArr" [value]="minute">
                      {{minute}}
                    </option>
                  </select>
                </div>
              </div>
            </div>
          </div>
          <div class="c-sm-3 c-md-3 c-lg-3">
            <div class="form-wrapper timepick">
              <label for="startTime">End Time</label>
              <div class="tbox">
                <div class="times ">
                  <select id="" class="mins side-form-ctrl" [(ngModel)]="weeklyCommonEndTime.hour" name="startTime">
                    <option [value]="time" *ngFor="let time of times">
                      {{time}}
                    </option>
                  </select>
                </div>
                <div class="times">
                  <select id="" class="mers side-form-ctrl" [(ngModel)]="weeklyCommonEndTime.minute" name="minute">
                    <option *ngFor="let minute of minArr" [value]="minute">
                      {{minute}}
                    </option>
                  </select>
                </div>
              </div>
            </div>
          </div>
          <div class="c-sm-3 c-md-3 c-lg-3">
            <button type="button" class="btn fullBlue" style="margin-top: 15px;" name="button"
              (click)="applyTimeForAll()">Apply</button>
          </div>
        </div>

        <div class="weekly-schedule-table-container">
          <div class="table-heading-container">
            <div class="heading-item">
              <span>Week Days</span>
            </div>
            <div class="heading-item">
              <span>Start Time</span>
            </div>
            <div class="heading-item">
              <span>End Time</span>
            </div>
          </div>
          <div class="table-outer-container">
            <div class="table-value-container" *ngFor="let day of weekDaysList">
              <div class="value-item">
                <div class="field-checkbox-wrapper" style="margin-top: 5px">
                  <input type="checkbox" value="" [(ngModel)]="day.uiSelected" class="form-checkbox"
                    id="{{day.data_key}}">
                  <label for="{{day.data_key}}">{{day.data_value}}</label>
                </div>
              </div>
              <div class="value-item">
                <div class="tbox">
                  <div class="times ">
                    <select id="" class="mins side-form-ctrl" [(ngModel)]="day.start_time.hour" name="startTime">
                      <option [value]="time" *ngFor="let time of times">
                        {{time}}
                      </option>
                    </select>
                  </div>
                  <div class="times">
                    <select id="" class="mers side-form-ctrl" [(ngModel)]="day.start_time.minute" name="minute">
                      <option *ngFor="let minute of minArr" [value]="minute">
                        {{minute}}
                      </option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="value-item">
                <div class="tbox">
                  <div class="times ">
                    <select id="" class="mins side-form-ctrl" [(ngModel)]="day.end_time.hour" name="startTime">
                      <option [value]="time" *ngFor="let time of times">
                        {{time}}
                      </option>
                    </select>
                  </div>
                  <div class="times">
                    <select id="" class="mers side-form-ctrl" [(ngModel)]="day.end_time.minute" name="minute">
                      <option *ngFor="let minute of minArr" [value]="minute">
                        {{minute}}
                      </option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>

        <!-- <div class="row extraMargin ">
          <h3>Ends</h3>
        </div> -->

        <!-- <div class="row extraMargin ">

          <div class="radio-options ">
            <div class="row extraMargin ">
              <div class="field-radio-wrapper c-sm-6 c-md-6 c-lg-6 ">
                <input type="radio " name="sFilter " class="form-radio " (click)="radioButtonClick($event) " value="false
                    " id="idCourseEndDate ">
                <label for="active ">Course End Date</label>
              </div>
              <div class="field-wrapper datePickerBox c-sm-3 c-md-3 c-lg-3 " [ngClass]="{ 'disabled': customRec.radioEndDate.radioEndDateSelection==false } ">
                <input type="text " value=" " readonly="true " [(ngModel)]="customRec.radioEndDate.radioDate " class="form-ctrl
                    bsDatepicker " name="endDate " bsDatepicker>
              </div>
            </div>
            <div class="row extraMargin ">
              <div class="field-radio-wrapper c-sm-6 c-md-6 c-lg-6 ">
                <input type="radio " name="sFilter " class="form-radio " value="false " (click)="radioButtonClick($event)
                    " id="idOn ">
                <label for="active ">On</label>
              </div>
              <div class="c-sm-3 c-md-3 c-lg-3 " [ngClass]="{ 'disabled': customRec.radioOn.radioONSelection==false } ">
                <div class="field-wrapper datePickerBox ">
                  <input type="text " value=" " readonly="true " [(ngModel)]="customRec.radioOn.radioOnDate " class="form-ctrl
                    bsDatepicker " name="endDate " bsDatepicker>
                </div>
              </div>
            </div>
            <div class="row extraMargin ">
              <div class="field-radio-wrapper c-sm-6 c-md-6 c-lg-6 ">
                <input type="radio " name="sFilter " class="form-radio " (click)="radioButtonClick($event) " value="false
                    " id="idAfter ">
                <label for="active ">After</label>
              </div>
              <div class="field-wrapper c-sm-3 c-md-3 c-lg-3 ">
                <input type="number " [readonly]="customRec.radioAfter.radioAfterSelection==false" #idSlot class="form-ctrl
                    halfwidth " name="slotNew " [(ngModel)]="customRec.radioAfter.occurenceValue ">
              </div>
              <span>occurrences</span>
            </div>
          </div>
        </div> -->

        <div class="row extraMargin" style="margin:10px 15px;">
          <aside class="pull-left">
            <span>This selection will add future classes till course end date.</span>
          </aside>
          <aside class="pull-right" style="margin-right: 15px">
            <button class="btn" (click)="saveCustomRecurrences()" [disabled]="multiClickDisabled">Save</button>
            <button class="btn" (click)="closePopup()">Cancel</button>
          </aside>
        </div>

      </div>
    </div>
  </div>
</section>


<!-- //////////////////////////////////////// Select Dates///////////////////////////////////////////// -->
<!-- //////////////////////////////////////// Select Dates///////////////////////////////////////////// -->
<!-- //////////////////////////////////////// Select Dates///////////////////////////////////////////// -->
<!-- //////////////////////////////////////// Select Dates///////////////////////////////////////////// -->
<!-- //////////////////////////////////////// Select Dates///////////////////////////////////////////// -->

<section id="popup " class="popupWrapper fadeIn " *ngIf="showPopUp">
  <div class="popup pos-abs popup-body-container ">
    <div class="popup-wrapper pos-rel ">

      <span class="closePopup pos-abs fbold show " id="popupCloseBtn " (click)="closePopup()">
        <svg class="artdeco-icon" focusable="false" height="24px" preserveAspectRatio="xMinYMin meet"
          viewBox="0 0 24 24" width="24px" x="0" y="0">
          <path class="large-icon"
            d="M20,5.32L13.32,12,20,18.68,18.66,20,12,13.33,5.34,20,4,18.68,10.68,12,4,5.32,5.32,4,12,10.69,18.68,4Z"
            style="fill: currentColor"></path>
        </svg>
      </span>

      <div class="popup-content popup-date-selection">

        <h2>Select Dates for Class</h2>

        <div class="">
          <label>Edit Selected Schedule</label>
        </div>

        <div class="row">
          <div class="form-wrapper has-value c-sm-6 c-md-6 c-lg-6">
            <label for="row.category_id ">Teacher Name</label>
            <select id=" " class=" form-ctrl side-form-ctrl " name="row.category_id "
              [(ngModel)]="selctedScheduledClass.teacher_id ">
              <option value="-1 "></option>
              <option *ngFor="let opt of teacherListDataSource " [value]="opt.teacher_id ">
                {{opt.teacher_name}}
              </option>
            </select>
          </div>

          <div class="c-sm-3 c-md-3 c-lg-3 paddingFive">
            <div class="form-wrapper timepick">
              <label for="startTime">Start Time</label>
              <div class="tbox">
                <div class="times">
                  <select id="" class="mins side-form-ctrl" [(ngModel)]="selctedScheduledClass.startTime.hour"
                    name="startTime">
                    <option [value]="time" *ngFor="let time of times">
                      {{time}}
                    </option>
                  </select>
                </div>
                <div class="times">
                  <select id="" class="mers side-form-ctrl" [(ngModel)]="selctedScheduledClass.startTime.minute"
                    name="minute">
                    <option *ngFor="let minute of minArr" [value]="minute">
                      {{minute}}
                    </option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          <div class="c-sm-3 c-md-3 c-lg-3 dig1 paddingFive">
            <div class="form-wrapper timepick">
              <label for="startTime">End Time</label>
              <div class="tbox">
                <div class="times">
                  <select id="" class="mins side-form-ctrl" [(ngModel)]="selctedScheduledClass.endTime.hour"
                    name="startTime">
                    <option [value]="time" *ngFor="let time of times">
                      {{time}}
                    </option>
                  </select>
                </div>
                <div class="times">
                  <select id="" class="mers side-form-ctrl" [(ngModel)]="selctedScheduledClass.endTime.minute"
                    name="minute">
                    <option *ngFor="let minute of minArr" [value]="minute">
                      {{minute}}
                    </option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="row">

          <div class="c-sm-6 c-md-6 c-lg-6">
            <div class="form-wrapper has-value">
              <label for="label">Room No</label>
              <input type="text" id="label" class="side-form-ctrl" name="label"
                [(ngModel)]="selctedScheduledClass.room_no">
            </div>
          </div>

          <div class="c-sm-6 c-md-6 c-lg-6">
            <div class="form-wrapper has-value">
              <label for="row.category_id ">Class Type</label>
              <select id="row.category_id" class="form-ctrl side-form-ctrl" name="row.category_id "
                style="background: transparent; " [(ngModel)]="selctedScheduledClass.custom_class_type ">
                <option *ngFor="let opt of customListDataSource ">
                  {{opt}}
                </option>
              </select>
            </div>
          </div>
        </div>

        <div class="row desc">
          <div class="c-sm-6 c-md-6 c-lg-6">
            <div class="form-wrapper has-value">
              <label for="label">Description</label>
              <input type="textbox" class="form-ctrl side-form-ctrl" name="label "
                [(ngModel)]="selctedScheduledClass.class_desc " id="slctdTxt3">
            </div>
          </div>
        </div>


        <div class="table-selectdate-wrapper">
          <div class="row extraMargin table-warpper-custom">
            <div class="table-scroll-wrapper ">
              <div class="table table-responsive ">
                <table>
                  <thead>
                    <tr>
                      <th>
                        Schedule Date
                      </th>
                      <th>
                        Action
                      </th>
                      <th>
                      </th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>
                        <div class="field-wrapper datePickerBox">
                          <input type="textbox" value="" readonly="true" [(ngModel)]="addDates.selectedDate"
                            class="form-ctrl bsDatepicker" name="endDate" bsDatepicker id="endTxt3">
                        </div>
                      </td>
                      <td>
                        <a style="font-size: 24px;font-weight: 600;" alt="Add " title="Add" (click)="addDateToArray() "
                          id="addAnch11">+</a>
                      </td>
                      <td>
                      </td>
                    </tr>
                    <tr *ngFor="let row of selectedDateArray; let i=index ; trackBy : index ">
                      <td>
                        {{row.selectedDate}}
                      </td>
                      <td>
                        <i class="fas fa fa-trash " (click)="removeDateToArray(i, row) " style="font-size: 19px; font-family:
                      FontAwesome; " alt="Remove " title="Remove " id="removeIcon1"></i>
                      </td>
                      <td style="color:#0084f6">
                        {{row.error}}
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>


        <div style="margin-top: 5px;">
          <button class="btn fullBlue pull-right " (click)="saveSelectedDateSchedule()">Save Class Schedule</button>
          <button class="btn pull-right" (click)="closePopup()">Cancel</button>
        </div>

      </div>

    </div>

  </div>

</section>

<!-- //////////////////////////////////////// Cancellation PopUp ///////////////////////////////////////////// -->
<!-- //////////////////////////////////////// Cancellation PopUp///////////////////////////////////////////// -->
<!-- //////////////////////////////////////// Cancellation PopUp///////////////////////////////////////////// -->
<!-- //////////////////////////////////////// Cancellation PopUp///////////////////////////////////////////// -->
<!-- //////////////////////////////////////// Cancellation PopUp///////////////////////////////////////////// -->

<section id="popup " class="popupWrapper fadeIn " *ngIf="showPopUpCancellation">
  <div class="popup pos-abs popup-body-container ">
    <div class="popup-wrapper pos-rel ">
      <span class="closePopup pos-abs fbold show " id="popupCloseBtn " (click)="closePopup()">
        <svg class="artdeco-icon" focusable="false" height="24px" preserveAspectRatio="xMinYMin meet"
          viewBox="0 0 24 24" width="24px" x="0" y="0">
          <path class="large-icon"
            d="M20,5.32L13.32,12,20,18.68,18.66,20,12,13.33,5.34,20,4,18.68,10.68,12,4,5.32,5.32,4,12,10.69,18.68,4Z"
            style="fill: currentColor"></path>
        </svg>
      </span>
      <div class="popup-content cancelWraper">
        <h2 *ngIf="isProfessional">Cancel Schedule
          <span style="color: #9b9b9b"> of {{cancelRowSelected.batch_name}}</span>
        </h2>
        <h2 *ngIf="!isProfessional">Cancel Schedule
          <span style="color: #9b9b9b">of {{cancelRowSelected.subject_name}}</span>
        </h2>
        <div class="row" style="margin:20px 10px">
          <div class="field-wrapper c-sm-6 c-md-6 c-lg-6">
            <textarea class="textBox" id="idTexboxReason" placeholder="Cancellation Reason"></textarea>
          </div>
        </div>

        <div class="row extraMargin">
          <div class="field-checkbox-wrapper pull-left">

            <input type="checkbox" checked name="enableSMS" class="form-checkbox" id="idChkbxEnable">
            <label for="idChkbxEnable">Notify students</label>
          </div>
          <div class="pull-right" *ngIf="!isProfessional" style="margin-right: 15px">
            <button class="btn" (click)="closePopup()">Close</button>
            <button class="btn fullBlue" (click)="cancelCourseSchedule()">Cancel</button>
          </div>
          <div class="pull-right" *ngIf="isProfessional" style="margin-right: 15px">
            <button class="btn" (click)="closePopup()">Close</button>
            <button class="btn fullBlue" (click)="cancelBatchSchedule()">Cancel Class</button>
          </div>
        </div>

      </div>
    </div>
  </div>
</section>

<!-- ///////////////////////////////////////////Warning PopUp///////////////////////////////////////////////////// -->
<!-- ///////////////////////////////////////////Warning PopUp///////////////////////////////////////////////////// -->
<!-- ///////////////////////////////////////////Warning PopUp///////////////////////////////////////////////////// -->
<!-- ///////////////////////////////////////////Warning PopUp///////////////////////////////////////////////////// -->
<!-- ///////////////////////////////////////////Warning PopUp///////////////////////////////////////////////////// -->
<!-- ///////////////////////////////////////////Warning PopUp///////////////////////////////////////////////////// -->
<section id="popup " class="popupWrapper fadeIn " *ngIf="showWarningPopup">
  <div class="popup pos-abs popup-body-container ">
    <div class="popup-wrapper pos-rel ">
      <span class="closePopup pos-abs fbold show " id="popupCloseBtn " (click)="closeWarningPopUp()">
        <svg xmlns="http://www.w3.org/2000/svg " viewBox="9310 2185 16 16 ">
          <g id="Group_1228 " data-name="Group 1228 " transform="translate(8298 1888) ">
            <g id="Group_1213 " data-name="Group 1213 " transform="translate(34.189 -7.77) ">
              <line id="Line_274 " data-name="Line 274 " class="cls-1 " y2="19.798 " transform="translate(992.81 305.77)
                      rotate(45) " />
              <line id="Line_275 " data-name="Line 275 " class="cls-1 " x1="19.798 " transform="translate(978.81 305.77)
                      rotate(45) " />
            </g>
            <rect id="Rectangle_686 " data-name="Rectangle 686 " style="stroke:none; " class="cls-2 " width="16
                      " height="16 " transform="translate(1012 297) " />
          </g>
        </svg>
      </span>
      <div class="popup-content">
        <div class="" *ngIf="batchFrequency == '1'">
          <div class="row warningNote ">
            <h5 style="padding: 10px;">
              <b style="font-weight: 600;">If custom schedule already exist, below changes are applicable:</b>
              <br>
              <br>
              <span> 1. &nbsp; Past and current date schedule will not be deleted.</span>
              <br>
              <span> 2. &nbsp; New schedule will be applicable from current date.</span>
              <br>
              <span> 3. &nbsp; Cancelled classes will not be deleted</span>
            </h5>
          </div>
          <div class="row">
            <div class="pull-right" style="margin-right: 20px;">
              <input class="btn" type="button" value="Close" (click)="closeWarningPopUp()" id="closeInp3">
              <input class="btn fullBlue" type="button" value="Add" (click)="createWeeklySchedule()" id="addInp4">
            </div>
          </div>
        </div>
        <div class="" *ngIf="batchFrequency == '2'">
          <div class="row warningNote">
            <h5 style="padding: 10px;">
              <b style="font-weight: 600;"> If weekly schedule already exist, below changes are applicable:</b>
              <br>
              <br>
              <span> 1. &nbsp; Past and current date schedule will not be deleted.</span>
              <br>
              <span> 2. &nbsp; New schedule will be applicable from current date.</span>
              <br>
              <span> 3. &nbsp; Cancelled classes will not be deleted.</span>
            </h5>
          </div>
          <div class="row">
            <div class="pull-right" style="margin-right: 20px;">
              <input class="btn" type="button" value="Close" (click)="closeWarningPopUp()" id="closeTxt6">
              <input class="btn fullBlue" type="button" value="Add" (click)="createCustomClasses()" id="createInp6">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>



<!-- //////////////////////////////////////// Cancel Weekly Schedule ///////////////////////////////////////////// -->
<!-- //////////////////////////////////////// Cancel Weekly Schedule///////////////////////////////////////////// -->
<!-- //////////////////////////////////////// Cancel Weekly Schedule///////////////////////////////////////////// -->
<!-- //////////////////////////////////////// Cancel Weekly Schedule///////////////////////////////////////////// -->
<!-- //////////////////////////////////////// Cancel Weekly Schedule///////////////////////////////////////////// -->

<section id="popup " class="popupWrapper fadeIn " *ngIf="cancelWeeklySchedulePop">
  <div class="popup pos-abs popup-body-container ">
    <div class="popup-wrapper pos-rel ">
      <span class="closePopup pos-abs fbold show " id="popupCloseBtn " (click)="closeWeeklySchedulePopup()">
        <svg xmlns="http://www.w3.org/2000/svg " viewBox="9310 2185 16 16 ">
          <g id="Group_1228 " data-name="Group 1228 " transform="translate(8298 1888) ">
            <g id="Group_1213 " data-name="Group 1213 " transform="translate(34.189 -7.77) ">
              <line id="Line_274 " data-name="Line 274 " class="cls-1 " y2="19.798 " transform="translate(992.81 305.77)
                    rotate(45) " />
              <line id="Line_275 " data-name="Line 275 " class="cls-1 " x1="19.798 " transform="translate(978.81 305.77)
                    rotate(45) " />
            </g>
            <rect id="Rectangle_686 " data-name="Rectangle 686 " style="stroke:none; " class="cls-2 " width="16
                    " height="16 " transform="translate(1012 297) " />
          </g>
        </svg>
      </span>
      <div class="popup-content cancelWraper">
        <h2 *ngIf="isProfessional">Batch Weekly Schedule Cancellation</h2>
        <div class="row">
          <div class="c-lg-6 c-md-6 c-sm-6">
            <div class="field-wrapper datePickerBox has-value">
              <label for="dateWee">Date
                <span class="text-danger">*</span>
              </label>
              <input type="text" value="" id="dateWee" class="form-ctrl bsDatepicker"
                [(ngModel)]="weeklyScheduleCan.date" readonly="true" name="csd" bsDatepicker>

            </div>
          </div>
          <div class="field-wrapper c-sm-6 c-md-6 c-lg-6">
            <textarea class="textBox" id="idTexboxReason" [(ngModel)]="weeklyScheduleCan.cancel_note"
              placeholder="Cancellation Reason"></textarea>
          </div>
        </div>

        <div class="row extraMargin">
          <div class="field-checkbox-wrapper pull-left">

            <input type="checkbox" [(ngModel)]="weeklyScheduleCan.is_notified" name="enableSMS" class="form-checkbox"
              id="NotifyStusde">
            <label for="NotifyStusde">Notify students</label>
          </div>
          <div class="pull-right" style="margin-right: 15px">
            <button class="btn" (click)="closeWeeklySchedulePopup()">Close</button>
            <button class="btn fullBlue" (click)="cancelWeeklySchedule()">Cancel Class</button>
          </div>
        </div>

      </div>
    </div>
  </div>
</section>


<section [hidden]="topicBox">
  <div class="topicBox">
    <div class="close-btn">
      <span (click)="closeAlert()">X</span>
    </div>
    <div class="header-container">
      <div class="sub-header">
        <span style="font-weight: 600;">Subject : </span>
        <span id="topicSubName">{{subject_name}}</span>
      </div>
      <div class="total-topic">
        <span style="font-weight: 600;">Total Topic : </span>
        <span id="topicCount">{{topicsData?.length}}</span>
      </div>
    </div>
    <!-- <div class="field-checkbox-wrapper" style="margin:10px;">
      <input type="checkbox" name="checkbx" id="select_all_topics" [(ngModel)]="selectAllTopics" (ngModelChange)="checkAllTopics()"
        class="form-checkbox">
      <label for="select_all_topics">
        Select All
      </label>
    </div> -->
    <div class="topic-listing-container">
      <kendo-treeview [nodes]="topicsData" [hasChildren]="hasChildren" [children]="children" kendoTreeViewSelectable
        kendoTreeViewHierarchyBinding kendoTreeViewExpandable textField="topicName"
        [kendoTreeViewCheckable]="checkableSettings" [(checkedKeys)]="checkedKeys" checkBy="topicId"
        (checkedChange)="handleChecking($event)">
      </kendo-treeview>
    </div>
    <!-- <div class="example-config">
           Checked keys: {{checkedKeys.length}} {{checkedKeys.join("|")}}
       </div> -->
    <div class="extraMargin row  pull-right" style="margin: 15px">
      <button class="btn" (click)="closeAlert()">Cancel</button>
      <button class="btn fullBlue" (click)="saveTopic()">Save</button>
    </div>
  </div>
</section>

<section *ngIf="showTopicsModal">
  <div class="topicBox">
    <div class="close-btn">
      <span (click)="closeTopicModal()">X</span>
    </div>
    <div class="header-container">
      <div class="sub-header">
        <span style="font-weight: 600;">Subject : </span>
        <span id="topicSubName">{{selectedSubjectInBatch}}</span>
      </div>

    </div>
    <div style="min-height: 110px;overflow-x: hidden;">
      <ng-container *ngTemplateOutlet="topicsRecursiveList; context:{$implicit: topicsList, level: 1 }"></ng-container>
    </div>
    <div class="extraMargin row  pull-right" style="margin: 15px">
      <button class="btn" (click)="closeTopicModal()">Cancel</button>
      <button class="btn fullBlue" *ngIf="showTopicsModal && !showCustomEditModal"
        (click)="saveSelectedTopics()">Save</button>
      <button class="btn fullBlue" *ngIf="showCustomEditModal" (click)="linkTopics()">Save</button>
    </div>
  </div>
</section>
<!--class="topic-listing-container"-->




<ng-template #topicsRecursiveList let-topicsList let-level="level">
  <div style="margin:2px !important" *ngFor="let topic of topicsList">
    <div class="topic-container" [ngClass]="level == 1 ? 'level1Topic': 'subTopicLevel'">
      <div class="arrow-icon" [style.visibility]="topic.subTopic.length ? 'visible':'hidden'"
        (click)="toggleArrow(topic)">
        <i [ngClass]="topic.isExpand ? 'fa fa-caret-down': 'fa fa-caret-right'" style="font-size: 15px!important;"></i>
      </div>
      <div class="field-checkbox-wrapper" style="margin-bottom: 5px !important;padding-left:0px !important">
        <input type="checkbox" [(ngModel)]="topic.checked" class="form-checkbox" value="{{topic.checked}}"
          (click)="selectTopics(topic,$event)" id="topic-{{topic.topicId}}" />

        <label for="topic-{{topic.topicId}}" style="margin-left:25px !important">{{topic.topicName}}</label>

        <div *ngIf="topic.isExpand">
          <ng-container
            *ngTemplateOutlet="topicsRecursiveList; context:{ $implicit: topic.subTopic, level: level + 1  }">
          </ng-container>
        </div>
      </div>

    </div>
  </div>
</ng-template>

<div class="black-bg" id="black-bg" [hidden]="topicBox" (click)="closeAlert()">

</div>
<div class="black-bg" id="black-bg" [hidden]="!showTopicsModal">

</div>